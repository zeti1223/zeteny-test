(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function fg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vf={exports:{}},lo={},yf={exports:{}},z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ni=Symbol.for("react.element"),hg=Symbol.for("react.portal"),pg=Symbol.for("react.fragment"),mg=Symbol.for("react.strict_mode"),gg=Symbol.for("react.profiler"),_g=Symbol.for("react.provider"),vg=Symbol.for("react.context"),yg=Symbol.for("react.forward_ref"),wg=Symbol.for("react.suspense"),Eg=Symbol.for("react.memo"),Cg=Symbol.for("react.lazy"),mc=Symbol.iterator;function Sg(t){return t===null||typeof t!="object"?null:(t=mc&&t[mc]||t["@@iterator"],typeof t=="function"?t:null)}var wf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ef=Object.assign,Cf={};function hr(t,e,n){this.props=t,this.context=e,this.refs=Cf,this.updater=n||wf}hr.prototype.isReactComponent={};hr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sf(){}Sf.prototype=hr.prototype;function za(t,e,n){this.props=t,this.context=e,this.refs=Cf,this.updater=n||wf}var ja=za.prototype=new Sf;ja.constructor=za;Ef(ja,hr.prototype);ja.isPureReactComponent=!0;var gc=Array.isArray,kf=Object.prototype.hasOwnProperty,Ba={current:null},If={key:!0,ref:!0,__self:!0,__source:!0};function Nf(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)kf.call(e,r)&&!If.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ni,type:t,key:s,ref:o,props:i,_owner:Ba.current}}function kg(t,e){return{$$typeof:Ni,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ua(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ni}function Ig(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _c=/\/+/g;function Uo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ig(""+t.key):e.toString(36)}function os(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ni:case hg:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Uo(o,0):r,gc(i)?(n="",t!=null&&(n=t.replace(_c,"$&/")+"/"),os(i,e,n,"",function(u){return u})):i!=null&&(Ua(i)&&(i=kg(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_c,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",gc(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Uo(s,l);o+=os(s,e,n,a,i)}else if(a=Sg(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Uo(s,l++),o+=os(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Wi(t,e,n){if(t==null)return t;var r=[],i=0;return os(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Ng(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Te={current:null},ls={transition:null},Tg={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:ls,ReactCurrentOwner:Ba};function Tf(){throw Error("act(...) is not supported in production builds of React.")}z.Children={map:Wi,forEach:function(t,e,n){Wi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wi(t,function(){e++}),e},toArray:function(t){return Wi(t,function(e){return e})||[]},only:function(t){if(!Ua(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};z.Component=hr;z.Fragment=pg;z.Profiler=gg;z.PureComponent=za;z.StrictMode=mg;z.Suspense=wg;z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tg;z.act=Tf;z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ef({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ba.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)kf.call(e,a)&&!If.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ni,type:t.type,key:i,ref:s,props:r,_owner:o}};z.createContext=function(t){return t={$$typeof:vg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_g,_context:t},t.Consumer=t};z.createElement=Nf;z.createFactory=function(t){var e=Nf.bind(null,t);return e.type=t,e};z.createRef=function(){return{current:null}};z.forwardRef=function(t){return{$$typeof:yg,render:t}};z.isValidElement=Ua;z.lazy=function(t){return{$$typeof:Cg,_payload:{_status:-1,_result:t},_init:Ng}};z.memo=function(t,e){return{$$typeof:Eg,type:t,compare:e===void 0?null:e}};z.startTransition=function(t){var e=ls.transition;ls.transition={};try{t()}finally{ls.transition=e}};z.unstable_act=Tf;z.useCallback=function(t,e){return Te.current.useCallback(t,e)};z.useContext=function(t){return Te.current.useContext(t)};z.useDebugValue=function(){};z.useDeferredValue=function(t){return Te.current.useDeferredValue(t)};z.useEffect=function(t,e){return Te.current.useEffect(t,e)};z.useId=function(){return Te.current.useId()};z.useImperativeHandle=function(t,e,n){return Te.current.useImperativeHandle(t,e,n)};z.useInsertionEffect=function(t,e){return Te.current.useInsertionEffect(t,e)};z.useLayoutEffect=function(t,e){return Te.current.useLayoutEffect(t,e)};z.useMemo=function(t,e){return Te.current.useMemo(t,e)};z.useReducer=function(t,e,n){return Te.current.useReducer(t,e,n)};z.useRef=function(t){return Te.current.useRef(t)};z.useState=function(t){return Te.current.useState(t)};z.useSyncExternalStore=function(t,e,n){return Te.current.useSyncExternalStore(t,e,n)};z.useTransition=function(){return Te.current.useTransition()};z.version="18.3.1";yf.exports=z;var W=yf.exports;const xg=fg(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg=W,Pg=Symbol.for("react.element"),Dg=Symbol.for("react.fragment"),Ag=Object.prototype.hasOwnProperty,Og=Rg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mg={key:!0,ref:!0,__self:!0,__source:!0};function xf(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ag.call(e,r)&&!Mg.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Pg,type:t,key:s,ref:o,props:i,_owner:Og.current}}lo.Fragment=Dg;lo.jsx=xf;lo.jsxs=xf;vf.exports=lo;var w=vf.exports,Rf={exports:{}},We={},Pf={exports:{}},Df={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,D){var O=T.length;T.push(D);e:for(;0<O;){var ne=O-1>>>1,ue=T[ne];if(0<i(ue,D))T[ne]=D,T[O]=ue,O=ne;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var D=T[0],O=T.pop();if(O!==D){T[0]=O;e:for(var ne=0,ue=T.length,Bi=ue>>>1;ne<Bi;){var ln=2*(ne+1)-1,Bo=T[ln],an=ln+1,Ui=T[an];if(0>i(Bo,O))an<ue&&0>i(Ui,Bo)?(T[ne]=Ui,T[an]=O,ne=an):(T[ne]=Bo,T[ln]=O,ne=ln);else if(an<ue&&0>i(Ui,O))T[ne]=Ui,T[an]=O,ne=an;else break e}}return D}function i(T,D){var O=T.sortIndex-D.sortIndex;return O!==0?O:T.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],f=1,c=null,d=3,_=!1,g=!1,v=!1,N=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(T){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=T)r(u),D.sortIndex=D.expirationTime,e(a,D);else break;D=n(u)}}function y(T){if(v=!1,m(T),!g)if(n(a)!==null)g=!0,zo(S);else{var D=n(u);D!==null&&jo(y,D.startTime-T)}}function S(T,D){g=!1,v&&(v=!1,p(R),R=-1),_=!0;var O=d;try{for(m(D),c=n(a);c!==null&&(!(c.expirationTime>D)||T&&!me());){var ne=c.callback;if(typeof ne=="function"){c.callback=null,d=c.priorityLevel;var ue=ne(c.expirationTime<=D);D=t.unstable_now(),typeof ue=="function"?c.callback=ue:c===n(a)&&r(a),m(D)}else r(a);c=n(a)}if(c!==null)var Bi=!0;else{var ln=n(u);ln!==null&&jo(y,ln.startTime-D),Bi=!1}return Bi}finally{c=null,d=O,_=!1}}var k=!1,x=null,R=-1,$=5,A=-1;function me(){return!(t.unstable_now()-A<$)}function Rt(){if(x!==null){var T=t.unstable_now();A=T;var D=!0;try{D=x(!0,T)}finally{D?on():(k=!1,x=null)}}else k=!1}var on;if(typeof h=="function")on=function(){h(Rt)};else if(typeof MessageChannel<"u"){var pc=new MessageChannel,dg=pc.port2;pc.port1.onmessage=Rt,on=function(){dg.postMessage(null)}}else on=function(){N(Rt,0)};function zo(T){x=T,k||(k=!0,on())}function jo(T,D){R=N(function(){T(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){g||_||(g=!0,zo(S))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(T){switch(d){case 1:case 2:case 3:var D=3;break;default:D=d}var O=d;d=D;try{return T()}finally{d=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,D){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var O=d;d=T;try{return D()}finally{d=O}},t.unstable_scheduleCallback=function(T,D,O){var ne=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?ne+O:ne):O=ne,T){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=O+ue,T={id:f++,callback:D,priorityLevel:T,startTime:O,expirationTime:ue,sortIndex:-1},O>ne?(T.sortIndex=O,e(u,T),n(a)===null&&T===n(u)&&(v?(p(R),R=-1):v=!0,jo(y,O-ne))):(T.sortIndex=ue,e(a,T),g||_||(g=!0,zo(S))),T},t.unstable_shouldYield=me,t.unstable_wrapCallback=function(T){var D=d;return function(){var O=d;d=D;try{return T.apply(this,arguments)}finally{d=O}}}})(Df);Pf.exports=Df;var Lg=Pf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg=W,Ue=Lg;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Af=new Set,Jr={};function Pn(t,e){nr(t,e),nr(t+"Capture",e)}function nr(t,e){for(Jr[t]=e,t=0;t<e.length;t++)Af.add(e[t])}var Ct=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nl=Object.prototype.hasOwnProperty,zg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vc={},yc={};function jg(t){return Nl.call(yc,t)?!0:Nl.call(vc,t)?!1:zg.test(t)?yc[t]=!0:(vc[t]=!0,!1)}function Bg(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ug(t,e,n,r){if(e===null||typeof e>"u"||Bg(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xe(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ve[t]=new xe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ve[e]=new xe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ve[t]=new xe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ve[t]=new xe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ve[t]=new xe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ve[t]=new xe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ve[t]=new xe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ve[t]=new xe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ve[t]=new xe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wa=/[\-:]([a-z])/g;function ba(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wa,ba);ve[e]=new xe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wa,ba);ve[e]=new xe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wa,ba);ve[e]=new xe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ve[t]=new xe(t,1,!1,t.toLowerCase(),null,!1,!1)});ve.xlinkHref=new xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ve[t]=new xe(t,1,!1,t.toLowerCase(),null,!0,!0)});function $a(t,e,n,r){var i=ve.hasOwnProperty(e)?ve[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ug(e,n,i,r)&&(n=null),r||i===null?jg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Tt=Fg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bi=Symbol.for("react.element"),Ln=Symbol.for("react.portal"),Fn=Symbol.for("react.fragment"),Ha=Symbol.for("react.strict_mode"),Tl=Symbol.for("react.profiler"),Of=Symbol.for("react.provider"),Mf=Symbol.for("react.context"),Va=Symbol.for("react.forward_ref"),xl=Symbol.for("react.suspense"),Rl=Symbol.for("react.suspense_list"),Qa=Symbol.for("react.memo"),Dt=Symbol.for("react.lazy"),Lf=Symbol.for("react.offscreen"),wc=Symbol.iterator;function Er(t){return t===null||typeof t!="object"?null:(t=wc&&t[wc]||t["@@iterator"],typeof t=="function"?t:null)}var ee=Object.assign,Wo;function Or(t){if(Wo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wo=e&&e[1]||""}return`
`+Wo+t}var bo=!1;function $o(t,e){if(!t||bo)return"";bo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{bo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Or(t):""}function Wg(t){switch(t.tag){case 5:return Or(t.type);case 16:return Or("Lazy");case 13:return Or("Suspense");case 19:return Or("SuspenseList");case 0:case 2:case 15:return t=$o(t.type,!1),t;case 11:return t=$o(t.type.render,!1),t;case 1:return t=$o(t.type,!0),t;default:return""}}function Pl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fn:return"Fragment";case Ln:return"Portal";case Tl:return"Profiler";case Ha:return"StrictMode";case xl:return"Suspense";case Rl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Mf:return(t.displayName||"Context")+".Consumer";case Of:return(t._context.displayName||"Context")+".Provider";case Va:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qa:return e=t.displayName||null,e!==null?e:Pl(t.type)||"Memo";case Dt:e=t._payload,t=t._init;try{return Pl(t(e))}catch{}}return null}function bg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pl(e);case 8:return e===Ha?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ff(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $g(t){var e=Ff(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $i(t){t._valueTracker||(t._valueTracker=$g(t))}function zf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ff(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ys(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dl(t,e){var n=e.checked;return ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ec(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yt(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jf(t,e){e=e.checked,e!=null&&$a(t,"checked",e,!1)}function Al(t,e){jf(t,e);var n=Yt(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ol(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ol(t,e.type,Yt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ol(t,e,n){(e!=="number"||ys(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mr=Array.isArray;function Kn(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ml(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(Mr(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yt(n)}}function Bf(t,e){var n=Yt(e.value),r=Yt(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function kc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Uf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ll(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Uf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hi,Wf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hi=Hi||document.createElement("div"),Hi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hg=["Webkit","ms","Moz","O"];Object.keys(zr).forEach(function(t){Hg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zr[e]=zr[t]})});function bf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zr.hasOwnProperty(t)&&zr[t]?(""+e).trim():e+"px"}function $f(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=bf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Vg=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fl(t,e){if(e){if(Vg[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function zl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jl=null;function Ga(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bl=null,Yn=null,qn=null;function Ic(t){if(t=Ri(t)){if(typeof Bl!="function")throw Error(E(280));var e=t.stateNode;e&&(e=ho(e),Bl(t.stateNode,t.type,e))}}function Hf(t){Yn?qn?qn.push(t):qn=[t]:Yn=t}function Vf(){if(Yn){var t=Yn,e=qn;if(qn=Yn=null,Ic(t),e)for(t=0;t<e.length;t++)Ic(e[t])}}function Qf(t,e){return t(e)}function Gf(){}var Ho=!1;function Kf(t,e,n){if(Ho)return t(e,n);Ho=!0;try{return Qf(t,e,n)}finally{Ho=!1,(Yn!==null||qn!==null)&&(Gf(),Vf())}}function ei(t,e){var n=t.stateNode;if(n===null)return null;var r=ho(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var Ul=!1;if(Ct)try{var Cr={};Object.defineProperty(Cr,"passive",{get:function(){Ul=!0}}),window.addEventListener("test",Cr,Cr),window.removeEventListener("test",Cr,Cr)}catch{Ul=!1}function Qg(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var jr=!1,ws=null,Es=!1,Wl=null,Gg={onError:function(t){jr=!0,ws=t}};function Kg(t,e,n,r,i,s,o,l,a){jr=!1,ws=null,Qg.apply(Gg,arguments)}function Yg(t,e,n,r,i,s,o,l,a){if(Kg.apply(this,arguments),jr){if(jr){var u=ws;jr=!1,ws=null}else throw Error(E(198));Es||(Es=!0,Wl=u)}}function Dn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Yf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Nc(t){if(Dn(t)!==t)throw Error(E(188))}function qg(t){var e=t.alternate;if(!e){if(e=Dn(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Nc(i),t;if(s===r)return Nc(i),e;s=s.sibling}throw Error(E(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function qf(t){return t=qg(t),t!==null?Xf(t):null}function Xf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Xf(t);if(e!==null)return e;t=t.sibling}return null}var Jf=Ue.unstable_scheduleCallback,Tc=Ue.unstable_cancelCallback,Xg=Ue.unstable_shouldYield,Jg=Ue.unstable_requestPaint,re=Ue.unstable_now,Zg=Ue.unstable_getCurrentPriorityLevel,Ka=Ue.unstable_ImmediatePriority,Zf=Ue.unstable_UserBlockingPriority,Cs=Ue.unstable_NormalPriority,e_=Ue.unstable_LowPriority,eh=Ue.unstable_IdlePriority,ao=null,ut=null;function t_(t){if(ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(ao,t,void 0,(t.current.flags&128)===128)}catch{}}var nt=Math.clz32?Math.clz32:i_,n_=Math.log,r_=Math.LN2;function i_(t){return t>>>=0,t===0?32:31-(n_(t)/r_|0)|0}var Vi=64,Qi=4194304;function Lr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ss(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Lr(l):(s&=o,s!==0&&(r=Lr(s)))}else o=n&~i,o!==0?r=Lr(o):s!==0&&(r=Lr(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nt(e),i=1<<n,r|=t[n],e&=~i;return r}function s_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function o_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-nt(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=s_(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function bl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function th(){var t=Vi;return Vi<<=1,!(Vi&4194240)&&(Vi=64),t}function Vo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ti(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nt(e),t[e]=n}function l_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-nt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ya(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var U=0;function nh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rh,qa,ih,sh,oh,$l=!1,Gi=[],zt=null,jt=null,Bt=null,ti=new Map,ni=new Map,Ot=[],a_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xc(t,e){switch(t){case"focusin":case"focusout":zt=null;break;case"dragenter":case"dragleave":jt=null;break;case"mouseover":case"mouseout":Bt=null;break;case"pointerover":case"pointerout":ti.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ni.delete(e.pointerId)}}function Sr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ri(e),e!==null&&qa(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function u_(t,e,n,r,i){switch(e){case"focusin":return zt=Sr(zt,t,e,n,r,i),!0;case"dragenter":return jt=Sr(jt,t,e,n,r,i),!0;case"mouseover":return Bt=Sr(Bt,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ti.set(s,Sr(ti.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ni.set(s,Sr(ni.get(s)||null,t,e,n,r,i)),!0}return!1}function lh(t){var e=hn(t.target);if(e!==null){var n=Dn(e);if(n!==null){if(e=n.tag,e===13){if(e=Yf(n),e!==null){t.blockedOn=e,oh(t.priority,function(){ih(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function as(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jl=r,n.target.dispatchEvent(r),jl=null}else return e=Ri(n),e!==null&&qa(e),t.blockedOn=n,!1;e.shift()}return!0}function Rc(t,e,n){as(t)&&n.delete(e)}function c_(){$l=!1,zt!==null&&as(zt)&&(zt=null),jt!==null&&as(jt)&&(jt=null),Bt!==null&&as(Bt)&&(Bt=null),ti.forEach(Rc),ni.forEach(Rc)}function kr(t,e){t.blockedOn===e&&(t.blockedOn=null,$l||($l=!0,Ue.unstable_scheduleCallback(Ue.unstable_NormalPriority,c_)))}function ri(t){function e(i){return kr(i,t)}if(0<Gi.length){kr(Gi[0],t);for(var n=1;n<Gi.length;n++){var r=Gi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zt!==null&&kr(zt,t),jt!==null&&kr(jt,t),Bt!==null&&kr(Bt,t),ti.forEach(e),ni.forEach(e),n=0;n<Ot.length;n++)r=Ot[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ot.length&&(n=Ot[0],n.blockedOn===null);)lh(n),n.blockedOn===null&&Ot.shift()}var Xn=Tt.ReactCurrentBatchConfig,ks=!0;function d_(t,e,n,r){var i=U,s=Xn.transition;Xn.transition=null;try{U=1,Xa(t,e,n,r)}finally{U=i,Xn.transition=s}}function f_(t,e,n,r){var i=U,s=Xn.transition;Xn.transition=null;try{U=4,Xa(t,e,n,r)}finally{U=i,Xn.transition=s}}function Xa(t,e,n,r){if(ks){var i=Hl(t,e,n,r);if(i===null)tl(t,e,r,Is,n),xc(t,r);else if(u_(i,t,e,n,r))r.stopPropagation();else if(xc(t,r),e&4&&-1<a_.indexOf(t)){for(;i!==null;){var s=Ri(i);if(s!==null&&rh(s),s=Hl(t,e,n,r),s===null&&tl(t,e,r,Is,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else tl(t,e,r,null,n)}}var Is=null;function Hl(t,e,n,r){if(Is=null,t=Ga(r),t=hn(t),t!==null)if(e=Dn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Yf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Is=t,null}function ah(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zg()){case Ka:return 1;case Zf:return 4;case Cs:case e_:return 16;case eh:return 536870912;default:return 16}default:return 16}}var Lt=null,Ja=null,us=null;function uh(){if(us)return us;var t,e=Ja,n=e.length,r,i="value"in Lt?Lt.value:Lt.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return us=i.slice(t,1<r?1-r:void 0)}function cs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ki(){return!0}function Pc(){return!1}function be(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ki:Pc,this.isPropagationStopped=Pc,this}return ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),e}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Za=be(pr),xi=ee({},pr,{view:0,detail:0}),h_=be(xi),Qo,Go,Ir,uo=ee({},xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ir&&(Ir&&t.type==="mousemove"?(Qo=t.screenX-Ir.screenX,Go=t.screenY-Ir.screenY):Go=Qo=0,Ir=t),Qo)},movementY:function(t){return"movementY"in t?t.movementY:Go}}),Dc=be(uo),p_=ee({},uo,{dataTransfer:0}),m_=be(p_),g_=ee({},xi,{relatedTarget:0}),Ko=be(g_),__=ee({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),v_=be(__),y_=ee({},pr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),w_=be(y_),E_=ee({},pr,{data:0}),Ac=be(E_),C_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k_[t])?!!e[t]:!1}function eu(){return I_}var N_=ee({},xi,{key:function(t){if(t.key){var e=C_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eu,charCode:function(t){return t.type==="keypress"?cs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T_=be(N_),x_=ee({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oc=be(x_),R_=ee({},xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eu}),P_=be(R_),D_=ee({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A_=be(D_),O_=ee({},uo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),M_=be(O_),L_=[9,13,27,32],tu=Ct&&"CompositionEvent"in window,Br=null;Ct&&"documentMode"in document&&(Br=document.documentMode);var F_=Ct&&"TextEvent"in window&&!Br,ch=Ct&&(!tu||Br&&8<Br&&11>=Br),Mc=" ",Lc=!1;function dh(t,e){switch(t){case"keyup":return L_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zn=!1;function z_(t,e){switch(t){case"compositionend":return fh(e);case"keypress":return e.which!==32?null:(Lc=!0,Mc);case"textInput":return t=e.data,t===Mc&&Lc?null:t;default:return null}}function j_(t,e){if(zn)return t==="compositionend"||!tu&&dh(t,e)?(t=uh(),us=Ja=Lt=null,zn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ch&&e.locale!=="ko"?null:e.data;default:return null}}var B_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!B_[t.type]:e==="textarea"}function hh(t,e,n,r){Hf(r),e=Ns(e,"onChange"),0<e.length&&(n=new Za("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ur=null,ii=null;function U_(t){kh(t,0)}function co(t){var e=Un(t);if(zf(e))return t}function W_(t,e){if(t==="change")return e}var ph=!1;if(Ct){var Yo;if(Ct){var qo="oninput"in document;if(!qo){var zc=document.createElement("div");zc.setAttribute("oninput","return;"),qo=typeof zc.oninput=="function"}Yo=qo}else Yo=!1;ph=Yo&&(!document.documentMode||9<document.documentMode)}function jc(){Ur&&(Ur.detachEvent("onpropertychange",mh),ii=Ur=null)}function mh(t){if(t.propertyName==="value"&&co(ii)){var e=[];hh(e,ii,t,Ga(t)),Kf(U_,e)}}function b_(t,e,n){t==="focusin"?(jc(),Ur=e,ii=n,Ur.attachEvent("onpropertychange",mh)):t==="focusout"&&jc()}function $_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return co(ii)}function H_(t,e){if(t==="click")return co(e)}function V_(t,e){if(t==="input"||t==="change")return co(e)}function Q_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var st=typeof Object.is=="function"?Object.is:Q_;function si(t,e){if(st(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Nl.call(e,i)||!st(t[i],e[i]))return!1}return!0}function Bc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uc(t,e){var n=Bc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bc(n)}}function gh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _h(){for(var t=window,e=ys();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ys(t.document)}return e}function nu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function G_(t){var e=_h(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gh(n.ownerDocument.documentElement,n)){if(r!==null&&nu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Uc(n,s);var o=Uc(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var K_=Ct&&"documentMode"in document&&11>=document.documentMode,jn=null,Vl=null,Wr=null,Ql=!1;function Wc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ql||jn==null||jn!==ys(r)||(r=jn,"selectionStart"in r&&nu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wr&&si(Wr,r)||(Wr=r,r=Ns(Vl,"onSelect"),0<r.length&&(e=new Za("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jn)))}function Yi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bn={animationend:Yi("Animation","AnimationEnd"),animationiteration:Yi("Animation","AnimationIteration"),animationstart:Yi("Animation","AnimationStart"),transitionend:Yi("Transition","TransitionEnd")},Xo={},vh={};Ct&&(vh=document.createElement("div").style,"AnimationEvent"in window||(delete Bn.animationend.animation,delete Bn.animationiteration.animation,delete Bn.animationstart.animation),"TransitionEvent"in window||delete Bn.transitionend.transition);function fo(t){if(Xo[t])return Xo[t];if(!Bn[t])return t;var e=Bn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vh)return Xo[t]=e[n];return t}var yh=fo("animationend"),wh=fo("animationiteration"),Eh=fo("animationstart"),Ch=fo("transitionend"),Sh=new Map,bc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tn(t,e){Sh.set(t,e),Pn(e,[t])}for(var Jo=0;Jo<bc.length;Jo++){var Zo=bc[Jo],Y_=Zo.toLowerCase(),q_=Zo[0].toUpperCase()+Zo.slice(1);tn(Y_,"on"+q_)}tn(yh,"onAnimationEnd");tn(wh,"onAnimationIteration");tn(Eh,"onAnimationStart");tn("dblclick","onDoubleClick");tn("focusin","onFocus");tn("focusout","onBlur");tn(Ch,"onTransitionEnd");nr("onMouseEnter",["mouseout","mouseover"]);nr("onMouseLeave",["mouseout","mouseover"]);nr("onPointerEnter",["pointerout","pointerover"]);nr("onPointerLeave",["pointerout","pointerover"]);Pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function $c(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Yg(r,e,void 0,t),t.currentTarget=null}function kh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;$c(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;$c(i,l,u),s=a}}}if(Es)throw t=Wl,Es=!1,Wl=null,t}function G(t,e){var n=e[Xl];n===void 0&&(n=e[Xl]=new Set);var r=t+"__bubble";n.has(r)||(Ih(e,t,2,!1),n.add(r))}function el(t,e,n){var r=0;e&&(r|=4),Ih(n,t,r,e)}var qi="_reactListening"+Math.random().toString(36).slice(2);function oi(t){if(!t[qi]){t[qi]=!0,Af.forEach(function(n){n!=="selectionchange"&&(X_.has(n)||el(n,!1,t),el(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qi]||(e[qi]=!0,el("selectionchange",!1,e))}}function Ih(t,e,n,r){switch(ah(e)){case 1:var i=d_;break;case 4:i=f_;break;default:i=Xa}n=i.bind(null,e,n,t),i=void 0,!Ul||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function tl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=hn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Kf(function(){var u=s,f=Ga(n),c=[];e:{var d=Sh.get(t);if(d!==void 0){var _=Za,g=t;switch(t){case"keypress":if(cs(n)===0)break e;case"keydown":case"keyup":_=T_;break;case"focusin":g="focus",_=Ko;break;case"focusout":g="blur",_=Ko;break;case"beforeblur":case"afterblur":_=Ko;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=m_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=P_;break;case yh:case wh:case Eh:_=v_;break;case Ch:_=A_;break;case"scroll":_=h_;break;case"wheel":_=M_;break;case"copy":case"cut":case"paste":_=w_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Oc}var v=(e&4)!==0,N=!v&&t==="scroll",p=v?d!==null?d+"Capture":null:d;v=[];for(var h=u,m;h!==null;){m=h;var y=m.stateNode;if(m.tag===5&&y!==null&&(m=y,p!==null&&(y=ei(h,p),y!=null&&v.push(li(h,y,m)))),N)break;h=h.return}0<v.length&&(d=new _(d,g,null,n,f),c.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",d&&n!==jl&&(g=n.relatedTarget||n.fromElement)&&(hn(g)||g[St]))break e;if((_||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,_?(g=n.relatedTarget||n.toElement,_=u,g=g?hn(g):null,g!==null&&(N=Dn(g),g!==N||g.tag!==5&&g.tag!==6)&&(g=null)):(_=null,g=u),_!==g)){if(v=Dc,y="onMouseLeave",p="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(v=Oc,y="onPointerLeave",p="onPointerEnter",h="pointer"),N=_==null?d:Un(_),m=g==null?d:Un(g),d=new v(y,h+"leave",_,n,f),d.target=N,d.relatedTarget=m,y=null,hn(f)===u&&(v=new v(p,h+"enter",g,n,f),v.target=m,v.relatedTarget=N,y=v),N=y,_&&g)t:{for(v=_,p=g,h=0,m=v;m;m=On(m))h++;for(m=0,y=p;y;y=On(y))m++;for(;0<h-m;)v=On(v),h--;for(;0<m-h;)p=On(p),m--;for(;h--;){if(v===p||p!==null&&v===p.alternate)break t;v=On(v),p=On(p)}v=null}else v=null;_!==null&&Hc(c,d,_,v,!1),g!==null&&N!==null&&Hc(c,N,g,v,!0)}}e:{if(d=u?Un(u):window,_=d.nodeName&&d.nodeName.toLowerCase(),_==="select"||_==="input"&&d.type==="file")var S=W_;else if(Fc(d))if(ph)S=V_;else{S=$_;var k=b_}else(_=d.nodeName)&&_.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=H_);if(S&&(S=S(t,u))){hh(c,S,n,f);break e}k&&k(t,d,u),t==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&Ol(d,"number",d.value)}switch(k=u?Un(u):window,t){case"focusin":(Fc(k)||k.contentEditable==="true")&&(jn=k,Vl=u,Wr=null);break;case"focusout":Wr=Vl=jn=null;break;case"mousedown":Ql=!0;break;case"contextmenu":case"mouseup":case"dragend":Ql=!1,Wc(c,n,f);break;case"selectionchange":if(K_)break;case"keydown":case"keyup":Wc(c,n,f)}var x;if(tu)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else zn?dh(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(ch&&n.locale!=="ko"&&(zn||R!=="onCompositionStart"?R==="onCompositionEnd"&&zn&&(x=uh()):(Lt=f,Ja="value"in Lt?Lt.value:Lt.textContent,zn=!0)),k=Ns(u,R),0<k.length&&(R=new Ac(R,t,null,n,f),c.push({event:R,listeners:k}),x?R.data=x:(x=fh(n),x!==null&&(R.data=x)))),(x=F_?z_(t,n):j_(t,n))&&(u=Ns(u,"onBeforeInput"),0<u.length&&(f=new Ac("onBeforeInput","beforeinput",null,n,f),c.push({event:f,listeners:u}),f.data=x))}kh(c,e)})}function li(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ns(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ei(t,n),s!=null&&r.unshift(li(t,s,i)),s=ei(t,e),s!=null&&r.push(li(t,s,i))),t=t.return}return r}function On(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hc(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=ei(n,s),a!=null&&o.unshift(li(n,a,l))):i||(a=ei(n,s),a!=null&&o.push(li(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var J_=/\r\n?/g,Z_=/\u0000|\uFFFD/g;function Vc(t){return(typeof t=="string"?t:""+t).replace(J_,`
`).replace(Z_,"")}function Xi(t,e,n){if(e=Vc(e),Vc(t)!==e&&n)throw Error(E(425))}function Ts(){}var Gl=null,Kl=null;function Yl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ql=typeof setTimeout=="function"?setTimeout:void 0,ev=typeof clearTimeout=="function"?clearTimeout:void 0,Qc=typeof Promise=="function"?Promise:void 0,tv=typeof queueMicrotask=="function"?queueMicrotask:typeof Qc<"u"?function(t){return Qc.resolve(null).then(t).catch(nv)}:ql;function nv(t){setTimeout(function(){throw t})}function nl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ri(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ri(e)}function Ut(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mr=Math.random().toString(36).slice(2),at="__reactFiber$"+mr,ai="__reactProps$"+mr,St="__reactContainer$"+mr,Xl="__reactEvents$"+mr,rv="__reactListeners$"+mr,iv="__reactHandles$"+mr;function hn(t){var e=t[at];if(e)return e;for(var n=t.parentNode;n;){if(e=n[St]||n[at]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gc(t);t!==null;){if(n=t[at])return n;t=Gc(t)}return e}t=n,n=t.parentNode}return null}function Ri(t){return t=t[at]||t[St],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Un(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function ho(t){return t[ai]||null}var Jl=[],Wn=-1;function nn(t){return{current:t}}function Y(t){0>Wn||(t.current=Jl[Wn],Jl[Wn]=null,Wn--)}function Q(t,e){Wn++,Jl[Wn]=t.current,t.current=e}var qt={},Se=nn(qt),Ae=nn(!1),En=qt;function rr(t,e){var n=t.type.contextTypes;if(!n)return qt;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Oe(t){return t=t.childContextTypes,t!=null}function xs(){Y(Ae),Y(Se)}function Kc(t,e,n){if(Se.current!==qt)throw Error(E(168));Q(Se,e),Q(Ae,n)}function Nh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(E(108,bg(t)||"Unknown",i));return ee({},n,r)}function Rs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qt,En=Se.current,Q(Se,t),Q(Ae,Ae.current),!0}function Yc(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=Nh(t,e,En),r.__reactInternalMemoizedMergedChildContext=t,Y(Ae),Y(Se),Q(Se,t)):Y(Ae),Q(Ae,n)}var pt=null,po=!1,rl=!1;function Th(t){pt===null?pt=[t]:pt.push(t)}function sv(t){po=!0,Th(t)}function rn(){if(!rl&&pt!==null){rl=!0;var t=0,e=U;try{var n=pt;for(U=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pt=null,po=!1}catch(i){throw pt!==null&&(pt=pt.slice(t+1)),Jf(Ka,rn),i}finally{U=e,rl=!1}}return null}var bn=[],$n=0,Ps=null,Ds=0,$e=[],He=0,Cn=null,_t=1,vt="";function un(t,e){bn[$n++]=Ds,bn[$n++]=Ps,Ps=t,Ds=e}function xh(t,e,n){$e[He++]=_t,$e[He++]=vt,$e[He++]=Cn,Cn=t;var r=_t;t=vt;var i=32-nt(r)-1;r&=~(1<<i),n+=1;var s=32-nt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,_t=1<<32-nt(e)+i|n<<i|r,vt=s+t}else _t=1<<s|n<<i|r,vt=t}function ru(t){t.return!==null&&(un(t,1),xh(t,1,0))}function iu(t){for(;t===Ps;)Ps=bn[--$n],bn[$n]=null,Ds=bn[--$n],bn[$n]=null;for(;t===Cn;)Cn=$e[--He],$e[He]=null,vt=$e[--He],$e[He]=null,_t=$e[--He],$e[He]=null}var Be=null,je=null,q=!1,Je=null;function Rh(t,e){var n=Ve(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Be=t,je=Ut(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Be=t,je=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cn!==null?{id:_t,overflow:vt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ve(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Be=t,je=null,!0):!1;default:return!1}}function Zl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ea(t){if(q){var e=je;if(e){var n=e;if(!qc(t,e)){if(Zl(t))throw Error(E(418));e=Ut(n.nextSibling);var r=Be;e&&qc(t,e)?Rh(r,n):(t.flags=t.flags&-4097|2,q=!1,Be=t)}}else{if(Zl(t))throw Error(E(418));t.flags=t.flags&-4097|2,q=!1,Be=t}}}function Xc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Be=t}function Ji(t){if(t!==Be)return!1;if(!q)return Xc(t),q=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yl(t.type,t.memoizedProps)),e&&(e=je)){if(Zl(t))throw Ph(),Error(E(418));for(;e;)Rh(t,e),e=Ut(e.nextSibling)}if(Xc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){je=Ut(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}je=null}}else je=Be?Ut(t.stateNode.nextSibling):null;return!0}function Ph(){for(var t=je;t;)t=Ut(t.nextSibling)}function ir(){je=Be=null,q=!1}function su(t){Je===null?Je=[t]:Je.push(t)}var ov=Tt.ReactCurrentBatchConfig;function Nr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function Zi(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jc(t){var e=t._init;return e(t._payload)}function Dh(t){function e(p,h){if(t){var m=p.deletions;m===null?(p.deletions=[h],p.flags|=16):m.push(h)}}function n(p,h){if(!t)return null;for(;h!==null;)e(p,h),h=h.sibling;return null}function r(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function i(p,h){return p=Ht(p,h),p.index=0,p.sibling=null,p}function s(p,h,m){return p.index=m,t?(m=p.alternate,m!==null?(m=m.index,m<h?(p.flags|=2,h):m):(p.flags|=2,h)):(p.flags|=1048576,h)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,h,m,y){return h===null||h.tag!==6?(h=cl(m,p.mode,y),h.return=p,h):(h=i(h,m),h.return=p,h)}function a(p,h,m,y){var S=m.type;return S===Fn?f(p,h,m.props.children,y,m.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Dt&&Jc(S)===h.type)?(y=i(h,m.props),y.ref=Nr(p,h,m),y.return=p,y):(y=_s(m.type,m.key,m.props,null,p.mode,y),y.ref=Nr(p,h,m),y.return=p,y)}function u(p,h,m,y){return h===null||h.tag!==4||h.stateNode.containerInfo!==m.containerInfo||h.stateNode.implementation!==m.implementation?(h=dl(m,p.mode,y),h.return=p,h):(h=i(h,m.children||[]),h.return=p,h)}function f(p,h,m,y,S){return h===null||h.tag!==7?(h=yn(m,p.mode,y,S),h.return=p,h):(h=i(h,m),h.return=p,h)}function c(p,h,m){if(typeof h=="string"&&h!==""||typeof h=="number")return h=cl(""+h,p.mode,m),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case bi:return m=_s(h.type,h.key,h.props,null,p.mode,m),m.ref=Nr(p,null,h),m.return=p,m;case Ln:return h=dl(h,p.mode,m),h.return=p,h;case Dt:var y=h._init;return c(p,y(h._payload),m)}if(Mr(h)||Er(h))return h=yn(h,p.mode,m,null),h.return=p,h;Zi(p,h)}return null}function d(p,h,m,y){var S=h!==null?h.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return S!==null?null:l(p,h,""+m,y);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case bi:return m.key===S?a(p,h,m,y):null;case Ln:return m.key===S?u(p,h,m,y):null;case Dt:return S=m._init,d(p,h,S(m._payload),y)}if(Mr(m)||Er(m))return S!==null?null:f(p,h,m,y,null);Zi(p,m)}return null}function _(p,h,m,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return p=p.get(m)||null,l(h,p,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case bi:return p=p.get(y.key===null?m:y.key)||null,a(h,p,y,S);case Ln:return p=p.get(y.key===null?m:y.key)||null,u(h,p,y,S);case Dt:var k=y._init;return _(p,h,m,k(y._payload),S)}if(Mr(y)||Er(y))return p=p.get(m)||null,f(h,p,y,S,null);Zi(h,y)}return null}function g(p,h,m,y){for(var S=null,k=null,x=h,R=h=0,$=null;x!==null&&R<m.length;R++){x.index>R?($=x,x=null):$=x.sibling;var A=d(p,x,m[R],y);if(A===null){x===null&&(x=$);break}t&&x&&A.alternate===null&&e(p,x),h=s(A,h,R),k===null?S=A:k.sibling=A,k=A,x=$}if(R===m.length)return n(p,x),q&&un(p,R),S;if(x===null){for(;R<m.length;R++)x=c(p,m[R],y),x!==null&&(h=s(x,h,R),k===null?S=x:k.sibling=x,k=x);return q&&un(p,R),S}for(x=r(p,x);R<m.length;R++)$=_(x,p,R,m[R],y),$!==null&&(t&&$.alternate!==null&&x.delete($.key===null?R:$.key),h=s($,h,R),k===null?S=$:k.sibling=$,k=$);return t&&x.forEach(function(me){return e(p,me)}),q&&un(p,R),S}function v(p,h,m,y){var S=Er(m);if(typeof S!="function")throw Error(E(150));if(m=S.call(m),m==null)throw Error(E(151));for(var k=S=null,x=h,R=h=0,$=null,A=m.next();x!==null&&!A.done;R++,A=m.next()){x.index>R?($=x,x=null):$=x.sibling;var me=d(p,x,A.value,y);if(me===null){x===null&&(x=$);break}t&&x&&me.alternate===null&&e(p,x),h=s(me,h,R),k===null?S=me:k.sibling=me,k=me,x=$}if(A.done)return n(p,x),q&&un(p,R),S;if(x===null){for(;!A.done;R++,A=m.next())A=c(p,A.value,y),A!==null&&(h=s(A,h,R),k===null?S=A:k.sibling=A,k=A);return q&&un(p,R),S}for(x=r(p,x);!A.done;R++,A=m.next())A=_(x,p,R,A.value,y),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?R:A.key),h=s(A,h,R),k===null?S=A:k.sibling=A,k=A);return t&&x.forEach(function(Rt){return e(p,Rt)}),q&&un(p,R),S}function N(p,h,m,y){if(typeof m=="object"&&m!==null&&m.type===Fn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case bi:e:{for(var S=m.key,k=h;k!==null;){if(k.key===S){if(S=m.type,S===Fn){if(k.tag===7){n(p,k.sibling),h=i(k,m.props.children),h.return=p,p=h;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Dt&&Jc(S)===k.type){n(p,k.sibling),h=i(k,m.props),h.ref=Nr(p,k,m),h.return=p,p=h;break e}n(p,k);break}else e(p,k);k=k.sibling}m.type===Fn?(h=yn(m.props.children,p.mode,y,m.key),h.return=p,p=h):(y=_s(m.type,m.key,m.props,null,p.mode,y),y.ref=Nr(p,h,m),y.return=p,p=y)}return o(p);case Ln:e:{for(k=m.key;h!==null;){if(h.key===k)if(h.tag===4&&h.stateNode.containerInfo===m.containerInfo&&h.stateNode.implementation===m.implementation){n(p,h.sibling),h=i(h,m.children||[]),h.return=p,p=h;break e}else{n(p,h);break}else e(p,h);h=h.sibling}h=dl(m,p.mode,y),h.return=p,p=h}return o(p);case Dt:return k=m._init,N(p,h,k(m._payload),y)}if(Mr(m))return g(p,h,m,y);if(Er(m))return v(p,h,m,y);Zi(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,h!==null&&h.tag===6?(n(p,h.sibling),h=i(h,m),h.return=p,p=h):(n(p,h),h=cl(m,p.mode,y),h.return=p,p=h),o(p)):n(p,h)}return N}var sr=Dh(!0),Ah=Dh(!1),As=nn(null),Os=null,Hn=null,ou=null;function lu(){ou=Hn=Os=null}function au(t){var e=As.current;Y(As),t._currentValue=e}function ta(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jn(t,e){Os=t,ou=Hn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pe=!0),t.firstContext=null)}function Ge(t){var e=t._currentValue;if(ou!==t)if(t={context:t,memoizedValue:e,next:null},Hn===null){if(Os===null)throw Error(E(308));Hn=t,Os.dependencies={lanes:0,firstContext:t}}else Hn=Hn.next=t;return e}var pn=null;function uu(t){pn===null?pn=[t]:pn.push(t)}function Oh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,uu(e)):(n.next=i.next,i.next=n),e.interleaved=n,kt(t,r)}function kt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var At=!1;function cu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,j&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,kt(t,n)}return i=r.interleaved,i===null?(e.next=e,uu(r)):(e.next=i.next,i.next=e),r.interleaved=e,kt(t,n)}function ds(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ya(t,n)}}function Zc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ms(t,e,n,r){var i=t.updateQueue;At=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=a))}if(s!==null){var c=i.baseState;o=0,f=u=a=null,l=s;do{var d=l.lane,_=l.eventTime;if((r&d)===d){f!==null&&(f=f.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,v=l;switch(d=e,_=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){c=g.call(_,c,d);break e}c=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,d=typeof g=="function"?g.call(_,c,d):g,d==null)break e;c=ee({},c,d);break e;case 2:At=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else _={eventTime:_,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=_,a=c):f=f.next=_,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(f===null&&(a=c),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);kn|=o,t.lanes=o,t.memoizedState=c}}function ed(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(E(191,i));i.call(r)}}}var Pi={},ct=nn(Pi),ui=nn(Pi),ci=nn(Pi);function mn(t){if(t===Pi)throw Error(E(174));return t}function du(t,e){switch(Q(ci,e),Q(ui,t),Q(ct,Pi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ll(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ll(e,t)}Y(ct),Q(ct,e)}function or(){Y(ct),Y(ui),Y(ci)}function Lh(t){mn(ci.current);var e=mn(ct.current),n=Ll(e,t.type);e!==n&&(Q(ui,t),Q(ct,n))}function fu(t){ui.current===t&&(Y(ct),Y(ui))}var X=nn(0);function Ls(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var il=[];function hu(){for(var t=0;t<il.length;t++)il[t]._workInProgressVersionPrimary=null;il.length=0}var fs=Tt.ReactCurrentDispatcher,sl=Tt.ReactCurrentBatchConfig,Sn=0,Z=null,se=null,de=null,Fs=!1,br=!1,di=0,lv=0;function ye(){throw Error(E(321))}function pu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!st(t[n],e[n]))return!1;return!0}function mu(t,e,n,r,i,s){if(Sn=s,Z=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fs.current=t===null||t.memoizedState===null?dv:fv,t=n(r,i),br){s=0;do{if(br=!1,di=0,25<=s)throw Error(E(301));s+=1,de=se=null,e.updateQueue=null,fs.current=hv,t=n(r,i)}while(br)}if(fs.current=zs,e=se!==null&&se.next!==null,Sn=0,de=se=Z=null,Fs=!1,e)throw Error(E(300));return t}function gu(){var t=di!==0;return di=0,t}function lt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?Z.memoizedState=de=t:de=de.next=t,de}function Ke(){if(se===null){var t=Z.alternate;t=t!==null?t.memoizedState:null}else t=se.next;var e=de===null?Z.memoizedState:de.next;if(e!==null)de=e,se=t;else{if(t===null)throw Error(E(310));se=t,t={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},de===null?Z.memoizedState=de=t:de=de.next=t}return de}function fi(t,e){return typeof e=="function"?e(t):e}function ol(t){var e=Ke(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=se,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var f=u.lane;if((Sn&f)===f)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=c,o=r):a=a.next=c,Z.lanes|=f,kn|=f}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,st(r,e.memoizedState)||(Pe=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Z.lanes|=s,kn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ll(t){var e=Ke(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);st(s,e.memoizedState)||(Pe=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Fh(){}function zh(t,e){var n=Z,r=Ke(),i=e(),s=!st(r.memoizedState,i);if(s&&(r.memoizedState=i,Pe=!0),r=r.queue,_u(Uh.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||de!==null&&de.memoizedState.tag&1){if(n.flags|=2048,hi(9,Bh.bind(null,n,r,i,e),void 0,null),pe===null)throw Error(E(349));Sn&30||jh(n,e,i)}return i}function jh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Bh(t,e,n,r){e.value=n,e.getSnapshot=r,Wh(e)&&bh(t)}function Uh(t,e,n){return n(function(){Wh(e)&&bh(t)})}function Wh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!st(t,n)}catch{return!0}}function bh(t){var e=kt(t,1);e!==null&&rt(e,t,1,-1)}function td(t){var e=lt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:t},e.queue=t,t=t.dispatch=cv.bind(null,Z,t),[e.memoizedState,t]}function hi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $h(){return Ke().memoizedState}function hs(t,e,n,r){var i=lt();Z.flags|=t,i.memoizedState=hi(1|e,n,void 0,r===void 0?null:r)}function mo(t,e,n,r){var i=Ke();r=r===void 0?null:r;var s=void 0;if(se!==null){var o=se.memoizedState;if(s=o.destroy,r!==null&&pu(r,o.deps)){i.memoizedState=hi(e,n,s,r);return}}Z.flags|=t,i.memoizedState=hi(1|e,n,s,r)}function nd(t,e){return hs(8390656,8,t,e)}function _u(t,e){return mo(2048,8,t,e)}function Hh(t,e){return mo(4,2,t,e)}function Vh(t,e){return mo(4,4,t,e)}function Qh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Gh(t,e,n){return n=n!=null?n.concat([t]):null,mo(4,4,Qh.bind(null,e,t),n)}function vu(){}function Kh(t,e){var n=Ke();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Yh(t,e){var n=Ke();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qh(t,e,n){return Sn&21?(st(n,e)||(n=th(),Z.lanes|=n,kn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pe=!0),t.memoizedState=n)}function av(t,e){var n=U;U=n!==0&&4>n?n:4,t(!0);var r=sl.transition;sl.transition={};try{t(!1),e()}finally{U=n,sl.transition=r}}function Xh(){return Ke().memoizedState}function uv(t,e,n){var r=$t(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jh(t))Zh(e,n);else if(n=Oh(t,e,n,r),n!==null){var i=Ne();rt(n,t,r,i),ep(n,e,r)}}function cv(t,e,n){var r=$t(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jh(t))Zh(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,st(l,o)){var a=e.interleaved;a===null?(i.next=i,uu(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Oh(t,e,i,r),n!==null&&(i=Ne(),rt(n,t,r,i),ep(n,e,r))}}function Jh(t){var e=t.alternate;return t===Z||e!==null&&e===Z}function Zh(t,e){br=Fs=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ep(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ya(t,n)}}var zs={readContext:Ge,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useInsertionEffect:ye,useLayoutEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useMutableSource:ye,useSyncExternalStore:ye,useId:ye,unstable_isNewReconciler:!1},dv={readContext:Ge,useCallback:function(t,e){return lt().memoizedState=[t,e===void 0?null:e],t},useContext:Ge,useEffect:nd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hs(4194308,4,Qh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hs(4194308,4,t,e)},useInsertionEffect:function(t,e){return hs(4,2,t,e)},useMemo:function(t,e){var n=lt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=lt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=uv.bind(null,Z,t),[r.memoizedState,t]},useRef:function(t){var e=lt();return t={current:t},e.memoizedState=t},useState:td,useDebugValue:vu,useDeferredValue:function(t){return lt().memoizedState=t},useTransition:function(){var t=td(!1),e=t[0];return t=av.bind(null,t[1]),lt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Z,i=lt();if(q){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),pe===null)throw Error(E(349));Sn&30||jh(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,nd(Uh.bind(null,r,s,t),[t]),r.flags|=2048,hi(9,Bh.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=lt(),e=pe.identifierPrefix;if(q){var n=vt,r=_t;n=(r&~(1<<32-nt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=di++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fv={readContext:Ge,useCallback:Kh,useContext:Ge,useEffect:_u,useImperativeHandle:Gh,useInsertionEffect:Hh,useLayoutEffect:Vh,useMemo:Yh,useReducer:ol,useRef:$h,useState:function(){return ol(fi)},useDebugValue:vu,useDeferredValue:function(t){var e=Ke();return qh(e,se.memoizedState,t)},useTransition:function(){var t=ol(fi)[0],e=Ke().memoizedState;return[t,e]},useMutableSource:Fh,useSyncExternalStore:zh,useId:Xh,unstable_isNewReconciler:!1},hv={readContext:Ge,useCallback:Kh,useContext:Ge,useEffect:_u,useImperativeHandle:Gh,useInsertionEffect:Hh,useLayoutEffect:Vh,useMemo:Yh,useReducer:ll,useRef:$h,useState:function(){return ll(fi)},useDebugValue:vu,useDeferredValue:function(t){var e=Ke();return se===null?e.memoizedState=t:qh(e,se.memoizedState,t)},useTransition:function(){var t=ll(fi)[0],e=Ke().memoizedState;return[t,e]},useMutableSource:Fh,useSyncExternalStore:zh,useId:Xh,unstable_isNewReconciler:!1};function qe(t,e){if(t&&t.defaultProps){e=ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function na(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var go={isMounted:function(t){return(t=t._reactInternals)?Dn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ne(),i=$t(t),s=wt(r,i);s.payload=e,n!=null&&(s.callback=n),e=Wt(t,s,i),e!==null&&(rt(e,t,i,r),ds(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ne(),i=$t(t),s=wt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Wt(t,s,i),e!==null&&(rt(e,t,i,r),ds(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ne(),r=$t(t),i=wt(n,r);i.tag=2,e!=null&&(i.callback=e),e=Wt(t,i,r),e!==null&&(rt(e,t,r,n),ds(e,t,r))}};function rd(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!si(n,r)||!si(i,s):!0}function tp(t,e,n){var r=!1,i=qt,s=e.contextType;return typeof s=="object"&&s!==null?s=Ge(s):(i=Oe(e)?En:Se.current,r=e.contextTypes,s=(r=r!=null)?rr(t,i):qt),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=go,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function id(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&go.enqueueReplaceState(e,e.state,null)}function ra(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},cu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ge(s):(s=Oe(e)?En:Se.current,i.context=rr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(na(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&go.enqueueReplaceState(i,i.state,null),Ms(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function lr(t,e){try{var n="",r=e;do n+=Wg(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function al(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ia(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pv=typeof WeakMap=="function"?WeakMap:Map;function np(t,e,n){n=wt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Bs||(Bs=!0,pa=r),ia(t,e)},n}function rp(t,e,n){n=wt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ia(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ia(t,e),typeof r!="function"&&(bt===null?bt=new Set([this]):bt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=xv.bind(null,t,e,n),e.then(t,t))}function od(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ld(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wt(-1,1),e.tag=2,Wt(n,e,1))),n.lanes|=1),t)}var mv=Tt.ReactCurrentOwner,Pe=!1;function ke(t,e,n,r){e.child=t===null?Ah(e,null,n,r):sr(e,t.child,n,r)}function ad(t,e,n,r,i){n=n.render;var s=e.ref;return Jn(e,i),r=mu(t,e,n,r,s,i),n=gu(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,It(t,e,i)):(q&&n&&ru(e),e.flags|=1,ke(t,e,r,i),e.child)}function ud(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Nu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ip(t,e,s,r,i)):(t=_s(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:si,n(o,r)&&t.ref===e.ref)return It(t,e,i)}return e.flags|=1,t=Ht(s,r),t.ref=e.ref,t.return=e,e.child=t}function ip(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(si(s,r)&&t.ref===e.ref)if(Pe=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Pe=!0);else return e.lanes=t.lanes,It(t,e,i)}return sa(t,e,n,r,i)}function sp(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(Qn,ze),ze|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Q(Qn,ze),ze|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Q(Qn,ze),ze|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Q(Qn,ze),ze|=r;return ke(t,e,i,n),e.child}function op(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sa(t,e,n,r,i){var s=Oe(n)?En:Se.current;return s=rr(e,s),Jn(e,i),n=mu(t,e,n,r,s,i),r=gu(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,It(t,e,i)):(q&&r&&ru(e),e.flags|=1,ke(t,e,n,i),e.child)}function cd(t,e,n,r,i){if(Oe(n)){var s=!0;Rs(e)}else s=!1;if(Jn(e,i),e.stateNode===null)ps(t,e),tp(e,n,r),ra(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ge(u):(u=Oe(n)?En:Se.current,u=rr(e,u));var f=n.getDerivedStateFromProps,c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&id(e,o,r,u),At=!1;var d=e.memoizedState;o.state=d,Ms(e,r,o,i),a=e.memoizedState,l!==r||d!==a||Ae.current||At?(typeof f=="function"&&(na(e,n,f,r),a=e.memoizedState),(l=At||rd(e,n,l,r,d,a,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Mh(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:qe(e.type,l),o.props=u,c=e.pendingProps,d=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ge(a):(a=Oe(n)?En:Se.current,a=rr(e,a));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==c||d!==a)&&id(e,o,r,a),At=!1,d=e.memoizedState,o.state=d,Ms(e,r,o,i);var g=e.memoizedState;l!==c||d!==g||Ae.current||At?(typeof _=="function"&&(na(e,n,_,r),g=e.memoizedState),(u=At||rd(e,n,u,r,d,g,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return oa(t,e,n,r,s,i)}function oa(t,e,n,r,i,s){op(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Yc(e,n,!1),It(t,e,s);r=e.stateNode,mv.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=sr(e,t.child,null,s),e.child=sr(e,null,l,s)):ke(t,e,l,s),e.memoizedState=r.state,i&&Yc(e,n,!0),e.child}function lp(t){var e=t.stateNode;e.pendingContext?Kc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kc(t,e.context,!1),du(t,e.containerInfo)}function dd(t,e,n,r,i){return ir(),su(i),e.flags|=256,ke(t,e,n,r),e.child}var la={dehydrated:null,treeContext:null,retryLane:0};function aa(t){return{baseLanes:t,cachePool:null,transitions:null}}function ap(t,e,n){var r=e.pendingProps,i=X.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Q(X,i&1),t===null)return ea(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yo(o,r,0,null),t=yn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=aa(n),e.memoizedState=la,t):yu(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return gv(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Ht(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Ht(l,s):(s=yn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?aa(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=la,r}return s=t.child,t=s.sibling,r=Ht(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yu(t,e){return e=yo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function es(t,e,n,r){return r!==null&&su(r),sr(e,t.child,null,n),t=yu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gv(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=al(Error(E(422))),es(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=yo({mode:"visible",children:r.children},i,0,null),s=yn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&sr(e,t.child,null,o),e.child.memoizedState=aa(o),e.memoizedState=la,s);if(!(e.mode&1))return es(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(E(419)),r=al(s,r,void 0),es(t,e,o,r)}if(l=(o&t.childLanes)!==0,Pe||l){if(r=pe,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,kt(t,i),rt(r,t,i,-1))}return Iu(),r=al(Error(E(421))),es(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Rv.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,je=Ut(i.nextSibling),Be=e,q=!0,Je=null,t!==null&&($e[He++]=_t,$e[He++]=vt,$e[He++]=Cn,_t=t.id,vt=t.overflow,Cn=e),e=yu(e,r.children),e.flags|=4096,e)}function fd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ta(t.return,e,n)}function ul(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function up(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ke(t,e,r.children,n),r=X.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fd(t,n,e);else if(t.tag===19)fd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Q(X,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ls(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ul(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ls(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ul(e,!0,n,null,s);break;case"together":ul(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ps(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function It(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=Ht(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ht(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _v(t,e,n){switch(e.tag){case 3:lp(e),ir();break;case 5:Lh(e);break;case 1:Oe(e.type)&&Rs(e);break;case 4:du(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Q(As,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Q(X,X.current&1),e.flags|=128,null):n&e.child.childLanes?ap(t,e,n):(Q(X,X.current&1),t=It(t,e,n),t!==null?t.sibling:null);Q(X,X.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return up(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Q(X,X.current),r)break;return null;case 22:case 23:return e.lanes=0,sp(t,e,n)}return It(t,e,n)}var cp,ua,dp,fp;cp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ua=function(){};dp=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,mn(ct.current);var s=null;switch(n){case"input":i=Dl(t,i),r=Dl(t,r),s=[];break;case"select":i=ee({},i,{value:void 0}),r=ee({},r,{value:void 0}),s=[];break;case"textarea":i=Ml(t,i),r=Ml(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ts)}Fl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Jr.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Jr.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&G("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};fp=function(t,e,n,r){n!==r&&(e.flags|=4)};function Tr(t,e){if(!q)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function we(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vv(t,e,n){var r=e.pendingProps;switch(iu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(e),null;case 1:return Oe(e.type)&&xs(),we(e),null;case 3:return r=e.stateNode,or(),Y(Ae),Y(Se),hu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ji(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Je!==null&&(_a(Je),Je=null))),ua(t,e),we(e),null;case 5:fu(e);var i=mn(ci.current);if(n=e.type,t!==null&&e.stateNode!=null)dp(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return we(e),null}if(t=mn(ct.current),Ji(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[at]=e,r[ai]=s,t=(e.mode&1)!==0,n){case"dialog":G("cancel",r),G("close",r);break;case"iframe":case"object":case"embed":G("load",r);break;case"video":case"audio":for(i=0;i<Fr.length;i++)G(Fr[i],r);break;case"source":G("error",r);break;case"img":case"image":case"link":G("error",r),G("load",r);break;case"details":G("toggle",r);break;case"input":Ec(r,s),G("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},G("invalid",r);break;case"textarea":Sc(r,s),G("invalid",r)}Fl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Xi(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Xi(r.textContent,l,t),i=["children",""+l]):Jr.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&G("scroll",r)}switch(n){case"input":$i(r),Cc(r,s,!0);break;case"textarea":$i(r),kc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ts)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Uf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[at]=e,t[ai]=r,cp(t,e,!1,!1),e.stateNode=t;e:{switch(o=zl(n,r),n){case"dialog":G("cancel",t),G("close",t),i=r;break;case"iframe":case"object":case"embed":G("load",t),i=r;break;case"video":case"audio":for(i=0;i<Fr.length;i++)G(Fr[i],t);i=r;break;case"source":G("error",t),i=r;break;case"img":case"image":case"link":G("error",t),G("load",t),i=r;break;case"details":G("toggle",t),i=r;break;case"input":Ec(t,r),i=Dl(t,r),G("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ee({},r,{value:void 0}),G("invalid",t);break;case"textarea":Sc(t,r),i=Ml(t,r),G("invalid",t);break;default:i=r}Fl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?$f(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Wf(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Zr(t,a):typeof a=="number"&&Zr(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jr.hasOwnProperty(s)?a!=null&&s==="onScroll"&&G("scroll",t):a!=null&&$a(t,s,a,o))}switch(n){case"input":$i(t),Cc(t,r,!1);break;case"textarea":$i(t),kc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yt(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Kn(t,!!r.multiple,s,!1):r.defaultValue!=null&&Kn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ts)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return we(e),null;case 6:if(t&&e.stateNode!=null)fp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=mn(ci.current),mn(ct.current),Ji(e)){if(r=e.stateNode,n=e.memoizedProps,r[at]=e,(s=r.nodeValue!==n)&&(t=Be,t!==null))switch(t.tag){case 3:Xi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xi(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[at]=e,e.stateNode=r}return we(e),null;case 13:if(Y(X),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(q&&je!==null&&e.mode&1&&!(e.flags&128))Ph(),ir(),e.flags|=98560,s=!1;else if(s=Ji(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[at]=e}else ir(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;we(e),s=!1}else Je!==null&&(_a(Je),Je=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||X.current&1?ae===0&&(ae=3):Iu())),e.updateQueue!==null&&(e.flags|=4),we(e),null);case 4:return or(),ua(t,e),t===null&&oi(e.stateNode.containerInfo),we(e),null;case 10:return au(e.type._context),we(e),null;case 17:return Oe(e.type)&&xs(),we(e),null;case 19:if(Y(X),s=e.memoizedState,s===null)return we(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Tr(s,!1);else{if(ae!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ls(t),o!==null){for(e.flags|=128,Tr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Q(X,X.current&1|2),e.child}t=t.sibling}s.tail!==null&&re()>ar&&(e.flags|=128,r=!0,Tr(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ls(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Tr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!q)return we(e),null}else 2*re()-s.renderingStartTime>ar&&n!==1073741824&&(e.flags|=128,r=!0,Tr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=re(),e.sibling=null,n=X.current,Q(X,r?n&1|2:n&1),e):(we(e),null);case 22:case 23:return ku(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ze&1073741824&&(we(e),e.subtreeFlags&6&&(e.flags|=8192)):we(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function yv(t,e){switch(iu(e),e.tag){case 1:return Oe(e.type)&&xs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return or(),Y(Ae),Y(Se),hu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fu(e),null;case 13:if(Y(X),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));ir()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Y(X),null;case 4:return or(),null;case 10:return au(e.type._context),null;case 22:case 23:return ku(),null;case 24:return null;default:return null}}var ts=!1,Ee=!1,wv=typeof WeakSet=="function"?WeakSet:Set,I=null;function Vn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){te(t,e,r)}else n.current=null}function ca(t,e,n){try{n()}catch(r){te(t,e,r)}}var hd=!1;function Ev(t,e){if(Gl=ks,t=_h(),nu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,f=0,c=t,d=null;t:for(;;){for(var _;c!==n||i!==0&&c.nodeType!==3||(l=o+i),c!==s||r!==0&&c.nodeType!==3||(a=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(_=c.firstChild)!==null;)d=c,c=_;for(;;){if(c===t)break t;if(d===n&&++u===i&&(l=o),d===s&&++f===r&&(a=o),(_=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=_}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kl={focusedElem:t,selectionRange:n},ks=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,N=g.memoizedState,p=e.stateNode,h=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:qe(e.type,v),N);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(y){te(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return g=hd,hd=!1,g}function $r(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ca(e,n,s)}i=i.next}while(i!==r)}}function _o(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function da(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hp(t){var e=t.alternate;e!==null&&(t.alternate=null,hp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[at],delete e[ai],delete e[Xl],delete e[rv],delete e[iv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pp(t){return t.tag===5||t.tag===3||t.tag===4}function pd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ts));else if(r!==4&&(t=t.child,t!==null))for(fa(t,e,n),t=t.sibling;t!==null;)fa(t,e,n),t=t.sibling}function ha(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ha(t,e,n),t=t.sibling;t!==null;)ha(t,e,n),t=t.sibling}var ge=null,Xe=!1;function Pt(t,e,n){for(n=n.child;n!==null;)mp(t,e,n),n=n.sibling}function mp(t,e,n){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(ao,n)}catch{}switch(n.tag){case 5:Ee||Vn(n,e);case 6:var r=ge,i=Xe;ge=null,Pt(t,e,n),ge=r,Xe=i,ge!==null&&(Xe?(t=ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ge.removeChild(n.stateNode));break;case 18:ge!==null&&(Xe?(t=ge,n=n.stateNode,t.nodeType===8?nl(t.parentNode,n):t.nodeType===1&&nl(t,n),ri(t)):nl(ge,n.stateNode));break;case 4:r=ge,i=Xe,ge=n.stateNode.containerInfo,Xe=!0,Pt(t,e,n),ge=r,Xe=i;break;case 0:case 11:case 14:case 15:if(!Ee&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ca(n,e,o),i=i.next}while(i!==r)}Pt(t,e,n);break;case 1:if(!Ee&&(Vn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){te(n,e,l)}Pt(t,e,n);break;case 21:Pt(t,e,n);break;case 22:n.mode&1?(Ee=(r=Ee)||n.memoizedState!==null,Pt(t,e,n),Ee=r):Pt(t,e,n);break;default:Pt(t,e,n)}}function md(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wv),e.forEach(function(r){var i=Pv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ye(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ge=l.stateNode,Xe=!1;break e;case 3:ge=l.stateNode.containerInfo,Xe=!0;break e;case 4:ge=l.stateNode.containerInfo,Xe=!0;break e}l=l.return}if(ge===null)throw Error(E(160));mp(s,o,i),ge=null,Xe=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){te(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gp(e,t),e=e.sibling}function gp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ye(e,t),ot(t),r&4){try{$r(3,t,t.return),_o(3,t)}catch(v){te(t,t.return,v)}try{$r(5,t,t.return)}catch(v){te(t,t.return,v)}}break;case 1:Ye(e,t),ot(t),r&512&&n!==null&&Vn(n,n.return);break;case 5:if(Ye(e,t),ot(t),r&512&&n!==null&&Vn(n,n.return),t.flags&32){var i=t.stateNode;try{Zr(i,"")}catch(v){te(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&jf(i,s),zl(l,o);var u=zl(l,s);for(o=0;o<a.length;o+=2){var f=a[o],c=a[o+1];f==="style"?$f(i,c):f==="dangerouslySetInnerHTML"?Wf(i,c):f==="children"?Zr(i,c):$a(i,f,c,u)}switch(l){case"input":Al(i,s);break;case"textarea":Bf(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Kn(i,!!s.multiple,_,!1):d!==!!s.multiple&&(s.defaultValue!=null?Kn(i,!!s.multiple,s.defaultValue,!0):Kn(i,!!s.multiple,s.multiple?[]:"",!1))}i[ai]=s}catch(v){te(t,t.return,v)}}break;case 6:if(Ye(e,t),ot(t),r&4){if(t.stateNode===null)throw Error(E(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){te(t,t.return,v)}}break;case 3:if(Ye(e,t),ot(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ri(e.containerInfo)}catch(v){te(t,t.return,v)}break;case 4:Ye(e,t),ot(t);break;case 13:Ye(e,t),ot(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Cu=re())),r&4&&md(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ee=(u=Ee)||f,Ye(e,t),Ee=u):Ye(e,t),ot(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(I=t,f=t.child;f!==null;){for(c=I=f;I!==null;){switch(d=I,_=d.child,d.tag){case 0:case 11:case 14:case 15:$r(4,d,d.return);break;case 1:Vn(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){te(r,n,v)}}break;case 5:Vn(d,d.return);break;case 22:if(d.memoizedState!==null){_d(c);continue}}_!==null?(_.return=d,I=_):_d(c)}f=f.sibling}e:for(f=null,c=t;;){if(c.tag===5){if(f===null){f=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=c.stateNode,a=c.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=bf("display",o))}catch(v){te(t,t.return,v)}}}else if(c.tag===6){if(f===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(v){te(t,t.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Ye(e,t),ot(t),r&4&&md(t);break;case 21:break;default:Ye(e,t),ot(t)}}function ot(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(pp(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Zr(i,""),r.flags&=-33);var s=pd(t);ha(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=pd(t);fa(t,l,o);break;default:throw Error(E(161))}}catch(a){te(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Cv(t,e,n){I=t,_p(t)}function _p(t,e,n){for(var r=(t.mode&1)!==0;I!==null;){var i=I,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ts;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ee;l=ts;var u=Ee;if(ts=o,(Ee=a)&&!u)for(I=i;I!==null;)o=I,a=o.child,o.tag===22&&o.memoizedState!==null?vd(i):a!==null?(a.return=o,I=a):vd(i);for(;s!==null;)I=s,_p(s),s=s.sibling;I=i,ts=l,Ee=u}gd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,I=s):gd(t)}}function gd(t){for(;I!==null;){var e=I;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ee||_o(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ee)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:qe(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ed(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ed(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var c=f.dehydrated;c!==null&&ri(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Ee||e.flags&512&&da(e)}catch(d){te(e,e.return,d)}}if(e===t){I=null;break}if(n=e.sibling,n!==null){n.return=e.return,I=n;break}I=e.return}}function _d(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var n=e.sibling;if(n!==null){n.return=e.return,I=n;break}I=e.return}}function vd(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_o(4,e)}catch(a){te(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){te(e,i,a)}}var s=e.return;try{da(e)}catch(a){te(e,s,a)}break;case 5:var o=e.return;try{da(e)}catch(a){te(e,o,a)}}}catch(a){te(e,e.return,a)}if(e===t){I=null;break}var l=e.sibling;if(l!==null){l.return=e.return,I=l;break}I=e.return}}var Sv=Math.ceil,js=Tt.ReactCurrentDispatcher,wu=Tt.ReactCurrentOwner,Qe=Tt.ReactCurrentBatchConfig,j=0,pe=null,ie=null,_e=0,ze=0,Qn=nn(0),ae=0,pi=null,kn=0,vo=0,Eu=0,Hr=null,Re=null,Cu=0,ar=1/0,ht=null,Bs=!1,pa=null,bt=null,ns=!1,Ft=null,Us=0,Vr=0,ma=null,ms=-1,gs=0;function Ne(){return j&6?re():ms!==-1?ms:ms=re()}function $t(t){return t.mode&1?j&2&&_e!==0?_e&-_e:ov.transition!==null?(gs===0&&(gs=th()),gs):(t=U,t!==0||(t=window.event,t=t===void 0?16:ah(t.type)),t):1}function rt(t,e,n,r){if(50<Vr)throw Vr=0,ma=null,Error(E(185));Ti(t,n,r),(!(j&2)||t!==pe)&&(t===pe&&(!(j&2)&&(vo|=n),ae===4&&Mt(t,_e)),Me(t,r),n===1&&j===0&&!(e.mode&1)&&(ar=re()+500,po&&rn()))}function Me(t,e){var n=t.callbackNode;o_(t,e);var r=Ss(t,t===pe?_e:0);if(r===0)n!==null&&Tc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Tc(n),e===1)t.tag===0?sv(yd.bind(null,t)):Th(yd.bind(null,t)),tv(function(){!(j&6)&&rn()}),n=null;else{switch(nh(r)){case 1:n=Ka;break;case 4:n=Zf;break;case 16:n=Cs;break;case 536870912:n=eh;break;default:n=Cs}n=Ip(n,vp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vp(t,e){if(ms=-1,gs=0,j&6)throw Error(E(327));var n=t.callbackNode;if(Zn()&&t.callbackNode!==n)return null;var r=Ss(t,t===pe?_e:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ws(t,r);else{e=r;var i=j;j|=2;var s=wp();(pe!==t||_e!==e)&&(ht=null,ar=re()+500,vn(t,e));do try{Nv();break}catch(l){yp(t,l)}while(!0);lu(),js.current=s,j=i,ie!==null?e=0:(pe=null,_e=0,e=ae)}if(e!==0){if(e===2&&(i=bl(t),i!==0&&(r=i,e=ga(t,i))),e===1)throw n=pi,vn(t,0),Mt(t,r),Me(t,re()),n;if(e===6)Mt(t,r);else{if(i=t.current.alternate,!(r&30)&&!kv(i)&&(e=Ws(t,r),e===2&&(s=bl(t),s!==0&&(r=s,e=ga(t,s))),e===1))throw n=pi,vn(t,0),Mt(t,r),Me(t,re()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:cn(t,Re,ht);break;case 3:if(Mt(t,r),(r&130023424)===r&&(e=Cu+500-re(),10<e)){if(Ss(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ne(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ql(cn.bind(null,t,Re,ht),e);break}cn(t,Re,ht);break;case 4:if(Mt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-nt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sv(r/1960))-r,10<r){t.timeoutHandle=ql(cn.bind(null,t,Re,ht),r);break}cn(t,Re,ht);break;case 5:cn(t,Re,ht);break;default:throw Error(E(329))}}}return Me(t,re()),t.callbackNode===n?vp.bind(null,t):null}function ga(t,e){var n=Hr;return t.current.memoizedState.isDehydrated&&(vn(t,e).flags|=256),t=Ws(t,e),t!==2&&(e=Re,Re=n,e!==null&&_a(e)),t}function _a(t){Re===null?Re=t:Re.push.apply(Re,t)}function kv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!st(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mt(t,e){for(e&=~Eu,e&=~vo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nt(e),r=1<<n;t[n]=-1,e&=~r}}function yd(t){if(j&6)throw Error(E(327));Zn();var e=Ss(t,0);if(!(e&1))return Me(t,re()),null;var n=Ws(t,e);if(t.tag!==0&&n===2){var r=bl(t);r!==0&&(e=r,n=ga(t,r))}if(n===1)throw n=pi,vn(t,0),Mt(t,e),Me(t,re()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cn(t,Re,ht),Me(t,re()),null}function Su(t,e){var n=j;j|=1;try{return t(e)}finally{j=n,j===0&&(ar=re()+500,po&&rn())}}function In(t){Ft!==null&&Ft.tag===0&&!(j&6)&&Zn();var e=j;j|=1;var n=Qe.transition,r=U;try{if(Qe.transition=null,U=1,t)return t()}finally{U=r,Qe.transition=n,j=e,!(j&6)&&rn()}}function ku(){ze=Qn.current,Y(Qn)}function vn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ev(n)),ie!==null)for(n=ie.return;n!==null;){var r=n;switch(iu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xs();break;case 3:or(),Y(Ae),Y(Se),hu();break;case 5:fu(r);break;case 4:or();break;case 13:Y(X);break;case 19:Y(X);break;case 10:au(r.type._context);break;case 22:case 23:ku()}n=n.return}if(pe=t,ie=t=Ht(t.current,null),_e=ze=e,ae=0,pi=null,Eu=vo=kn=0,Re=Hr=null,pn!==null){for(e=0;e<pn.length;e++)if(n=pn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}pn=null}return t}function yp(t,e){do{var n=ie;try{if(lu(),fs.current=zs,Fs){for(var r=Z.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fs=!1}if(Sn=0,de=se=Z=null,br=!1,di=0,wu.current=null,n===null||n.return===null){ae=1,pi=e,ie=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=_e,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,f=l,c=f.tag;if(!(f.mode&1)&&(c===0||c===11||c===15)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=od(o);if(_!==null){_.flags&=-257,ld(_,o,l,s,e),_.mode&1&&sd(s,u,e),e=_,a=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(a),e.updateQueue=v}else g.add(a);break e}else{if(!(e&1)){sd(s,u,e),Iu();break e}a=Error(E(426))}}else if(q&&l.mode&1){var N=od(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),ld(N,o,l,s,e),su(lr(a,l));break e}}s=a=lr(a,l),ae!==4&&(ae=2),Hr===null?Hr=[s]:Hr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=np(s,a,e);Zc(s,p);break e;case 1:l=a;var h=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(bt===null||!bt.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var y=rp(s,l,e);Zc(s,y);break e}}s=s.return}while(s!==null)}Cp(n)}catch(S){e=S,ie===n&&n!==null&&(ie=n=n.return);continue}break}while(!0)}function wp(){var t=js.current;return js.current=zs,t===null?zs:t}function Iu(){(ae===0||ae===3||ae===2)&&(ae=4),pe===null||!(kn&268435455)&&!(vo&268435455)||Mt(pe,_e)}function Ws(t,e){var n=j;j|=2;var r=wp();(pe!==t||_e!==e)&&(ht=null,vn(t,e));do try{Iv();break}catch(i){yp(t,i)}while(!0);if(lu(),j=n,js.current=r,ie!==null)throw Error(E(261));return pe=null,_e=0,ae}function Iv(){for(;ie!==null;)Ep(ie)}function Nv(){for(;ie!==null&&!Xg();)Ep(ie)}function Ep(t){var e=kp(t.alternate,t,ze);t.memoizedProps=t.pendingProps,e===null?Cp(t):ie=e,wu.current=null}function Cp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yv(n,e),n!==null){n.flags&=32767,ie=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ae=6,ie=null;return}}else if(n=vv(n,e,ze),n!==null){ie=n;return}if(e=e.sibling,e!==null){ie=e;return}ie=e=t}while(e!==null);ae===0&&(ae=5)}function cn(t,e,n){var r=U,i=Qe.transition;try{Qe.transition=null,U=1,Tv(t,e,n,r)}finally{Qe.transition=i,U=r}return null}function Tv(t,e,n,r){do Zn();while(Ft!==null);if(j&6)throw Error(E(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(l_(t,s),t===pe&&(ie=pe=null,_e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ns||(ns=!0,Ip(Cs,function(){return Zn(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qe.transition,Qe.transition=null;var o=U;U=1;var l=j;j|=4,wu.current=null,Ev(t,n),gp(n,t),G_(Kl),ks=!!Gl,Kl=Gl=null,t.current=n,Cv(n),Jg(),j=l,U=o,Qe.transition=s}else t.current=n;if(ns&&(ns=!1,Ft=t,Us=i),s=t.pendingLanes,s===0&&(bt=null),t_(n.stateNode),Me(t,re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bs)throw Bs=!1,t=pa,pa=null,t;return Us&1&&t.tag!==0&&Zn(),s=t.pendingLanes,s&1?t===ma?Vr++:(Vr=0,ma=t):Vr=0,rn(),null}function Zn(){if(Ft!==null){var t=nh(Us),e=Qe.transition,n=U;try{if(Qe.transition=null,U=16>t?16:t,Ft===null)var r=!1;else{if(t=Ft,Ft=null,Us=0,j&6)throw Error(E(331));var i=j;for(j|=4,I=t.current;I!==null;){var s=I,o=s.child;if(I.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(I=u;I!==null;){var f=I;switch(f.tag){case 0:case 11:case 15:$r(8,f,s)}var c=f.child;if(c!==null)c.return=f,I=c;else for(;I!==null;){f=I;var d=f.sibling,_=f.return;if(hp(f),f===u){I=null;break}if(d!==null){d.return=_,I=d;break}I=_}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var N=v.sibling;v.sibling=null,v=N}while(v!==null)}}I=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,I=o;else e:for(;I!==null;){if(s=I,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$r(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,I=p;break e}I=s.return}}var h=t.current;for(I=h;I!==null;){o=I;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,I=m;else e:for(o=h;I!==null;){if(l=I,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_o(9,l)}}catch(S){te(l,l.return,S)}if(l===o){I=null;break e}var y=l.sibling;if(y!==null){y.return=l.return,I=y;break e}I=l.return}}if(j=i,rn(),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(ao,t)}catch{}r=!0}return r}finally{U=n,Qe.transition=e}}return!1}function wd(t,e,n){e=lr(n,e),e=np(t,e,1),t=Wt(t,e,1),e=Ne(),t!==null&&(Ti(t,1,e),Me(t,e))}function te(t,e,n){if(t.tag===3)wd(t,t,n);else for(;e!==null;){if(e.tag===3){wd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bt===null||!bt.has(r))){t=lr(n,t),t=rp(e,t,1),e=Wt(e,t,1),t=Ne(),e!==null&&(Ti(e,1,t),Me(e,t));break}}e=e.return}}function xv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ne(),t.pingedLanes|=t.suspendedLanes&n,pe===t&&(_e&n)===n&&(ae===4||ae===3&&(_e&130023424)===_e&&500>re()-Cu?vn(t,0):Eu|=n),Me(t,e)}function Sp(t,e){e===0&&(t.mode&1?(e=Qi,Qi<<=1,!(Qi&130023424)&&(Qi=4194304)):e=1);var n=Ne();t=kt(t,e),t!==null&&(Ti(t,e,n),Me(t,n))}function Rv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Sp(t,n)}function Pv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),Sp(t,n)}var kp;kp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ae.current)Pe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pe=!1,_v(t,e,n);Pe=!!(t.flags&131072)}else Pe=!1,q&&e.flags&1048576&&xh(e,Ds,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ps(t,e),t=e.pendingProps;var i=rr(e,Se.current);Jn(e,n),i=mu(null,e,r,t,i,n);var s=gu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oe(r)?(s=!0,Rs(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cu(e),i.updater=go,e.stateNode=i,i._reactInternals=e,ra(e,r,t,n),e=oa(null,e,r,!0,s,n)):(e.tag=0,q&&s&&ru(e),ke(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ps(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Av(r),t=qe(r,t),i){case 0:e=sa(null,e,r,t,n);break e;case 1:e=cd(null,e,r,t,n);break e;case 11:e=ad(null,e,r,t,n);break e;case 14:e=ud(null,e,r,qe(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qe(r,i),sa(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qe(r,i),cd(t,e,r,i,n);case 3:e:{if(lp(e),t===null)throw Error(E(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Mh(t,e),Ms(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=lr(Error(E(423)),e),e=dd(t,e,r,n,i);break e}else if(r!==i){i=lr(Error(E(424)),e),e=dd(t,e,r,n,i);break e}else for(je=Ut(e.stateNode.containerInfo.firstChild),Be=e,q=!0,Je=null,n=Ah(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ir(),r===i){e=It(t,e,n);break e}ke(t,e,r,n)}e=e.child}return e;case 5:return Lh(e),t===null&&ea(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Yl(r,i)?o=null:s!==null&&Yl(r,s)&&(e.flags|=32),op(t,e),ke(t,e,o,n),e.child;case 6:return t===null&&ea(e),null;case 13:return ap(t,e,n);case 4:return du(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=sr(e,null,r,n):ke(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qe(r,i),ad(t,e,r,i,n);case 7:return ke(t,e,e.pendingProps,n),e.child;case 8:return ke(t,e,e.pendingProps.children,n),e.child;case 12:return ke(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Q(As,r._currentValue),r._currentValue=o,s!==null)if(st(s.value,o)){if(s.children===i.children&&!Ae.current){e=It(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=wt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ta(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ta(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ke(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Jn(e,n),i=Ge(i),r=r(i),e.flags|=1,ke(t,e,r,n),e.child;case 14:return r=e.type,i=qe(r,e.pendingProps),i=qe(r.type,i),ud(t,e,r,i,n);case 15:return ip(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qe(r,i),ps(t,e),e.tag=1,Oe(r)?(t=!0,Rs(e)):t=!1,Jn(e,n),tp(e,r,i),ra(e,r,i,n),oa(null,e,r,!0,t,n);case 19:return up(t,e,n);case 22:return sp(t,e,n)}throw Error(E(156,e.tag))};function Ip(t,e){return Jf(t,e)}function Dv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ve(t,e,n,r){return new Dv(t,e,n,r)}function Nu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Av(t){if(typeof t=="function")return Nu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Va)return 11;if(t===Qa)return 14}return 2}function Ht(t,e){var n=t.alternate;return n===null?(n=Ve(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _s(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Nu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fn:return yn(n.children,i,s,e);case Ha:o=8,i|=8;break;case Tl:return t=Ve(12,n,e,i|2),t.elementType=Tl,t.lanes=s,t;case xl:return t=Ve(13,n,e,i),t.elementType=xl,t.lanes=s,t;case Rl:return t=Ve(19,n,e,i),t.elementType=Rl,t.lanes=s,t;case Lf:return yo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Of:o=10;break e;case Mf:o=9;break e;case Va:o=11;break e;case Qa:o=14;break e;case Dt:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=Ve(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function yn(t,e,n,r){return t=Ve(7,t,r,e),t.lanes=n,t}function yo(t,e,n,r){return t=Ve(22,t,r,e),t.elementType=Lf,t.lanes=n,t.stateNode={isHidden:!1},t}function cl(t,e,n){return t=Ve(6,t,null,e),t.lanes=n,t}function dl(t,e,n){return e=Ve(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ov(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vo(0),this.expirationTimes=Vo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Tu(t,e,n,r,i,s,o,l,a){return t=new Ov(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ve(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cu(s),t}function Mv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ln,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Np(t){if(!t)return qt;t=t._reactInternals;e:{if(Dn(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Oe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Oe(n))return Nh(t,n,e)}return e}function Tp(t,e,n,r,i,s,o,l,a){return t=Tu(n,r,!0,t,i,s,o,l,a),t.context=Np(null),n=t.current,r=Ne(),i=$t(n),s=wt(r,i),s.callback=e??null,Wt(n,s,i),t.current.lanes=i,Ti(t,i,r),Me(t,r),t}function wo(t,e,n,r){var i=e.current,s=Ne(),o=$t(i);return n=Np(n),e.context===null?e.context=n:e.pendingContext=n,e=wt(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wt(i,e,o),t!==null&&(rt(t,i,o,s),ds(t,i,o)),o}function bs(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ed(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xu(t,e){Ed(t,e),(t=t.alternate)&&Ed(t,e)}function Lv(){return null}var xp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ru(t){this._internalRoot=t}Eo.prototype.render=Ru.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));wo(t,e,null,null)};Eo.prototype.unmount=Ru.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;In(function(){wo(null,t,null,null)}),e[St]=null}};function Eo(t){this._internalRoot=t}Eo.prototype.unstable_scheduleHydration=function(t){if(t){var e=sh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ot.length&&e!==0&&e<Ot[n].priority;n++);Ot.splice(n,0,t),n===0&&lh(t)}};function Pu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Co(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cd(){}function Fv(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=bs(o);s.call(u)}}var o=Tp(e,r,t,0,null,!1,!1,"",Cd);return t._reactRootContainer=o,t[St]=o.current,oi(t.nodeType===8?t.parentNode:t),In(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=bs(a);l.call(u)}}var a=Tu(t,0,!1,null,null,!1,!1,"",Cd);return t._reactRootContainer=a,t[St]=a.current,oi(t.nodeType===8?t.parentNode:t),In(function(){wo(e,a,n,r)}),a}function So(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=bs(o);l.call(a)}}wo(e,o,t,i)}else o=Fv(n,e,t,i,r);return bs(o)}rh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lr(e.pendingLanes);n!==0&&(Ya(e,n|1),Me(e,re()),!(j&6)&&(ar=re()+500,rn()))}break;case 13:In(function(){var r=kt(t,1);if(r!==null){var i=Ne();rt(r,t,1,i)}}),xu(t,1)}};qa=function(t){if(t.tag===13){var e=kt(t,134217728);if(e!==null){var n=Ne();rt(e,t,134217728,n)}xu(t,134217728)}};ih=function(t){if(t.tag===13){var e=$t(t),n=kt(t,e);if(n!==null){var r=Ne();rt(n,t,e,r)}xu(t,e)}};sh=function(){return U};oh=function(t,e){var n=U;try{return U=t,e()}finally{U=n}};Bl=function(t,e,n){switch(e){case"input":if(Al(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ho(r);if(!i)throw Error(E(90));zf(r),Al(r,i)}}}break;case"textarea":Bf(t,n);break;case"select":e=n.value,e!=null&&Kn(t,!!n.multiple,e,!1)}};Qf=Su;Gf=In;var zv={usingClientEntryPoint:!1,Events:[Ri,Un,ho,Hf,Vf,Su]},xr={findFiberByHostInstance:hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jv={bundleType:xr.bundleType,version:xr.version,rendererPackageName:xr.rendererPackageName,rendererConfig:xr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qf(t),t===null?null:t.stateNode},findFiberByHostInstance:xr.findFiberByHostInstance||Lv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rs.isDisabled&&rs.supportsFiber)try{ao=rs.inject(jv),ut=rs}catch{}}We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zv;We.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pu(e))throw Error(E(200));return Mv(t,e,null,n)};We.createRoot=function(t,e){if(!Pu(t))throw Error(E(299));var n=!1,r="",i=xp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Tu(t,1,!1,null,null,n,!1,r,i),t[St]=e.current,oi(t.nodeType===8?t.parentNode:t),new Ru(e)};We.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=qf(e),t=t===null?null:t.stateNode,t};We.flushSync=function(t){return In(t)};We.hydrate=function(t,e,n){if(!Co(e))throw Error(E(200));return So(null,t,e,!0,n)};We.hydrateRoot=function(t,e,n){if(!Pu(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=xp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Tp(e,null,t,1,n??null,i,!1,s,o),t[St]=e.current,oi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Eo(e)};We.render=function(t,e,n){if(!Co(e))throw Error(E(200));return So(null,t,e,!1,n)};We.unmountComponentAtNode=function(t){if(!Co(t))throw Error(E(40));return t._reactRootContainer?(In(function(){So(null,null,t,!1,function(){t._reactRootContainer=null,t[St]=null})}),!0):!1};We.unstable_batchedUpdates=Su;We.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Co(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return So(t,e,n,!1,r)};We.version="18.3.1-next-f1338f8080-20240426";function Rp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rp)}catch(t){console.error(t)}}Rp(),Rf.exports=We;var Bv=Rf.exports,Pp,Sd=Bv;Pp=Sd.createRoot,Sd.hydrateRoot;function Uv({currentUser:t,onLogout:e,isDarkMode:n,toggleDark:r}){return w.jsxs("header",{children:[w.jsxs("div",{className:"logo",children:[w.jsx("i",{className:"fas fa-comments"})," Firebase Chat"]}),w.jsxs("div",{className:"header-controls",children:[w.jsx("button",{className:"theme-toggle",onClick:r,children:w.jsx("i",{className:n?"fas fa-sun":"fas fa-moon"})}),w.jsx("button",{className:"logout-btn",onClick:e,children:w.jsx("i",{className:"fas fa-sign-out-alt"})})]})]})}var kd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C=function(t,e){if(!t)throw gr(e)},gr=function(t){return new Error("Firebase Database ("+Dp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Wv=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Du={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,f=s>>2,c=(s&3)<<4|l>>4;let d=(l&15)<<2|u>>6,_=u&63;a||(_=64,o||(d=64)),r.push(n[f],n[c],n[d],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ap(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Wv(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const c=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||c==null)throw new bv;const d=s<<2|l>>4;if(r.push(d),u!==64){const _=l<<4&240|u>>2;if(r.push(_),c!==64){const g=u<<6&192|c;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Op=function(t){const e=Ap(t);return Du.encodeByteArray(e,!0)},$s=function(t){return Op(t).replace(/\./g,"")},va=function(t){try{return Du.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t){return Mp(void 0,t)}function Mp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Hv(n)||(t[n]=Mp(t[n],e[n]));return t}function Hv(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=()=>Vv().__FIREBASE_DEFAULTS__,Gv=()=>{if(typeof process>"u"||typeof kd>"u")return;const t=kd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Kv=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&va(t[1]);return e&&JSON.parse(e)},Lp=()=>{try{return Qv()||Gv()||Kv()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Yv=t=>{var e,n;return(n=(e=Lp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qv=t=>{const e=Yv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Fp=()=>{var t;return(t=Lp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[$s(JSON.stringify(n)),$s(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jv())}function Zv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ey(){return Dp.NODE_ADMIN===!0}function ty(){try{return typeof indexedDB=="object"}catch{return!1}}function ny(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="FirebaseError";class Di extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ry,Object.setPrototypeOf(this,Di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jp.prototype.create)}}class jp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?iy(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Di(i,l,r)}}function iy(t,e){return t.replace(sy,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const sy=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(t){return JSON.parse(t)}function oe(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=mi(va(s[0])||""),n=mi(va(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},oy=function(t){const e=Bp(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},ly=function(t){const e=Bp(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ur(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Id(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hs(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function ya(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Nd(s)&&Nd(o)){if(!ya(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Nd(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let c=0;c<16;c++)r[c]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let c=0;c<16;c++)r[c]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let c=16;c<80;c++){const d=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,f;for(let c=0;c<80;c++){c<40?c<20?(u=l^s&(o^l),f=1518500249):(u=s^o^l,f=1859775393):c<60?(u=s&o|l&(s|o),f=2400959708):(u=s^o^l,f=3395469782);const d=(i<<5|i>>>27)+u+a+f+r[c]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Au(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,C(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Io=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){return t&&t._delegate?t._delegate:t}class gi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ko;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hy(e))try{this.getOrInitializeService({instanceIdentifier:dn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=dn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=dn){return this.instances.has(e)}getOptions(e=dn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fy(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=dn){return this.component?this.component.multipleInstances?e:dn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fy(t){return t===dn?void 0:t}function hy(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(H||(H={}));const my={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},gy=H.INFO,_y={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},vy=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=_y[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Up{constructor(e){this.name=e,this._logLevel=gy,this._logHandler=vy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in H))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?my[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...e),this._logHandler(this,H.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...e),this._logHandler(this,H.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,H.INFO,...e),this._logHandler(this,H.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,H.WARN,...e),this._logHandler(this,H.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...e),this._logHandler(this,H.ERROR,...e)}}const yy=(t,e)=>e.some(n=>t instanceof n);let Td,xd;function wy(){return Td||(Td=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ey(){return xd||(xd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wp=new WeakMap,wa=new WeakMap,bp=new WeakMap,fl=new WeakMap,Ou=new WeakMap;function Cy(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Vt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Wp.set(n,t)}).catch(()=>{}),Ou.set(e,t),e}function Sy(t){if(wa.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});wa.set(t,e)}let Ea={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wa.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bp.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ky(t){Ea=t(Ea)}function Iy(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hl(this),e,...n);return bp.set(r,e.sort?e.sort():[e]),Vt(r)}:Ey().includes(t)?function(...e){return t.apply(hl(this),e),Vt(Wp.get(this))}:function(...e){return Vt(t.apply(hl(this),e))}}function Ny(t){return typeof t=="function"?Iy(t):(t instanceof IDBTransaction&&Sy(t),yy(t,wy())?new Proxy(t,Ea):t)}function Vt(t){if(t instanceof IDBRequest)return Cy(t);if(fl.has(t))return fl.get(t);const e=Ny(t);return e!==t&&(fl.set(t,e),Ou.set(e,t)),e}const hl=t=>Ou.get(t);function Ty(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Vt(o);return r&&o.addEventListener("upgradeneeded",a=>{r(Vt(o.result),a.oldVersion,a.newVersion,Vt(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const xy=["get","getKey","getAll","getAllKeys","count"],Ry=["put","add","delete","clear"],pl=new Map;function Rd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pl.get(e))return pl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Ry.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xy.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return pl.set(e,s),s}ky(t=>({...t,get:(e,n,r)=>Rd(e,n)||t.get(e,n,r),has:(e,n)=>!!Rd(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Dy(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Dy(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ca="@firebase/app",Pd="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new Up("@firebase/app"),Ay="@firebase/app-compat",Oy="@firebase/analytics-compat",My="@firebase/analytics",Ly="@firebase/app-check-compat",Fy="@firebase/app-check",zy="@firebase/auth",jy="@firebase/auth-compat",By="@firebase/database",Uy="@firebase/database-compat",Wy="@firebase/functions",by="@firebase/functions-compat",$y="@firebase/installations",Hy="@firebase/installations-compat",Vy="@firebase/messaging",Qy="@firebase/messaging-compat",Gy="@firebase/performance",Ky="@firebase/performance-compat",Yy="@firebase/remote-config",qy="@firebase/remote-config-compat",Xy="@firebase/storage",Jy="@firebase/storage-compat",Zy="@firebase/firestore",ew="@firebase/firestore-compat",tw="firebase",nw="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]",rw={[Ca]:"fire-core",[Ay]:"fire-core-compat",[My]:"fire-analytics",[Oy]:"fire-analytics-compat",[Fy]:"fire-app-check",[Ly]:"fire-app-check-compat",[zy]:"fire-auth",[jy]:"fire-auth-compat",[By]:"fire-rtdb",[Uy]:"fire-rtdb-compat",[Wy]:"fire-fn",[by]:"fire-fn-compat",[$y]:"fire-iid",[Hy]:"fire-iid-compat",[Vy]:"fire-fcm",[Qy]:"fire-fcm-compat",[Gy]:"fire-perf",[Ky]:"fire-perf-compat",[Yy]:"fire-rc",[qy]:"fire-rc-compat",[Xy]:"fire-gcs",[Jy]:"fire-gcs-compat",[Zy]:"fire-fst",[ew]:"fire-fst-compat","fire-js":"fire-js",[tw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new Map,ka=new Map;function iw(t,e){try{t.container.addComponent(e)}catch(n){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qs(t){const e=t.name;if(ka.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;ka.set(e,t);for(const n of Vs.values())iw(n,t);return!0}function sw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Qt=new jp("app","Firebase",ow);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=nw;function $p(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sa,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Qt.create("bad-app-name",{appName:String(i)});if(n||(n=Fp()),!n)throw Qt.create("no-options");const s=Vs.get(i);if(s){if(ya(n,s.options)&&ya(r,s.config))return s;throw Qt.create("duplicate-app",{appName:i})}const o=new py(i);for(const a of ka.values())o.addComponent(a);const l=new lw(n,r,o);return Vs.set(i,l),l}function uw(t=Sa){const e=Vs.get(t);if(!e&&t===Sa&&Fp())return $p();if(!e)throw Qt.create("no-app",{appName:t});return e}function er(t,e,n){var r;let i=(r=rw[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(l.join(" "));return}Qs(new gi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="firebase-heartbeat-database",dw=1,_i="firebase-heartbeat-store";let ml=null;function Hp(){return ml||(ml=Ty(cw,dw,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_i)}}}).catch(t=>{throw Qt.create("idb-open",{originalErrorMessage:t.message})})),ml}async function fw(t){try{return await(await Hp()).transaction(_i).objectStore(_i).get(Vp(t))}catch(e){if(e instanceof Di)Nn.warn(e.message);else{const n=Qt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nn.warn(n.message)}}}async function Dd(t,e){try{const r=(await Hp()).transaction(_i,"readwrite");await r.objectStore(_i).put(e,Vp(t)),await r.done}catch(n){if(n instanceof Di)Nn.warn(n.message);else{const r=Qt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Nn.warn(r.message)}}}function Vp(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=1024,pw=30*24*60*60*1e3;class mw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _w(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ad();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=pw}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ad(),{heartbeatsToSend:n,unsentEntries:r}=gw(this._heartbeatsCache.heartbeats),i=$s(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ad(){return new Date().toISOString().substring(0,10)}function gw(t,e=hw){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Od(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Od(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _w{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ty()?ny().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await fw(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Dd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Dd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Od(t){return $s(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t){Qs(new gi("platform-logger",e=>new Py(e),"PRIVATE")),Qs(new gi("heartbeat",e=>new mw(e),"PRIVATE")),er(Ca,Pd,t),er(Ca,Pd,"esm2017"),er("fire-js","")}vw("");var yw="firebase",ww="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er(yw,ww,"app");var Md={};const Ld="@firebase/database",Fd="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qp="";function Ew(t){Qp=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),oe(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:mi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ft(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Cw(e)}}catch{}return new Sw},gn=Gp("localStorage"),kw=Gp("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new Up("@firebase/database"),Iw=function(){let t=1;return function(){return t++}}(),Kp=function(t){const e=cy(t),n=new uy;n.update(e);const r=n.digest();return Du.encodeByteArray(r)},Ai=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ai.apply(null,r):typeof r=="object"?e+=oe(r):e+=r,e+=" "}return e};let Qr=null,zd=!0;const Nw=function(t,e){C(!0,"Can't turn on custom loggers persistently."),tr.logLevel=H.VERBOSE,Qr=tr.log.bind(tr)},Ce=function(...t){if(zd===!0&&(zd=!1,Qr===null&&kw.get("logging_enabled")===!0&&Nw()),Qr){const e=Ai.apply(null,t);Qr(e)}},Oi=function(t){return function(...e){Ce(t,...e)}},Ia=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ai(...t);tr.error(e)},Nt=function(...t){const e=`FIREBASE FATAL ERROR: ${Ai(...t)}`;throw tr.error(e),new Error(e)},Le=function(...t){const e="FIREBASE WARNING: "+Ai(...t);tr.warn(e)},Tw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Le("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Mu=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},xw=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Tn="[MIN_NAME]",Xt="[MAX_NAME]",_r=function(t,e){if(t===e)return 0;if(t===Tn||e===Xt)return-1;if(e===Tn||t===Xt)return 1;{const n=jd(t),r=jd(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Rw=function(t,e){return t===e?0:t<e?-1:1},Rr=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+oe(e))},Lu=function(t){if(typeof t!="object"||t===null)return oe(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=oe(e[r]),n+=":",n+=Lu(t[e[r]]);return n+="}",n},Yp=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Fe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const qp=function(t){C(!Mu(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const f=u.join("");let c="";for(a=0;a<64;a+=8){let d=parseInt(f.substr(a,8),2).toString(16);d.length===1&&(d="0"+d),c=c+d}return c.toLowerCase()},Pw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Dw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Aw(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Ow=new RegExp("^-?(0*)\\d{1,10}$"),Mw=-2147483648,Lw=2147483647,jd=function(t){if(Ow.test(t)){const e=Number(t);if(e>=Mw&&e<=Lw)return e}return null},vr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Le("Exception was thrown by user callback.",n),e},Math.floor(0))}},Fw=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Gr=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Le(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ce("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Le(e)}}class vs{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}vs.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu="5",Xp="v",Jp="s",Zp="r",em="f",tm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nm="ls",rm="p",Na="ac",im="websocket",sm="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Bw(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function lm(t,e,n){C(typeof e=="string","typeof type must == string"),C(typeof n=="object","typeof params must == object");let r;if(e===im)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===sm)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Bw(t)&&(n.ns=t.namespace);const i=[];return Fe(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.counters_={}}incrementCounter(e,n=1){ft(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return $v(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl={},_l={};function zu(t){const e=t.toString();return gl[e]||(gl[e]=new Uw),gl[e]}function Ww(t,e){const n=t.toString();return _l[n]||(_l[n]=e()),_l[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&vr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="start",$w="close",Hw="pLPCommand",Vw="pRTLPCB",am="id",um="pw",cm="ser",Qw="cb",Gw="seg",Kw="ts",Yw="d",qw="dframe",dm=1870,fm=30,Xw=dm-fm,Jw=25e3,Zw=3e4;class Gn{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Oi(e),this.stats_=zu(n),this.urlFn=a=>(this.appCheckToken&&(a[Na]=this.appCheckToken),lm(n,sm,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new bw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Zw)),xw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ju((...s)=>{const[o,l,a,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Bd)this.id=l,this.password=a;else if(o===$w)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Bd]="t",r[cm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Qw]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Xp]=Fu,this.transportSessionId&&(r[Jp]=this.transportSessionId),this.lastSessionId&&(r[nm]=this.lastSessionId),this.applicationId&&(r[rm]=this.applicationId),this.appCheckToken&&(r[Na]=this.appCheckToken),typeof location<"u"&&location.hostname&&tm.test(location.hostname)&&(r[Zp]=em);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Gn.forceAllow_=!0}static forceDisallow(){Gn.forceDisallow_=!0}static isAvailable(){return Gn.forceAllow_?!0:!Gn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Pw()&&!Dw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=oe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Op(n),i=Yp(r,Xw);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[qw]="t",r[am]=e,r[um]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=oe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class ju{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Iw(),window[Hw+this.uniqueCallbackIdentifier]=e,window[Vw+this.uniqueCallbackIdentifier]=n,this.myIFrame=ju.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Ce("frame writing exception"),l.stack&&Ce(l.stack),Ce(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ce("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[am]=this.myID,e[um]=this.myPW,e[cm]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+fm+r.length<=dm;){const o=this.pendingSegs.shift();r=r+"&"+Gw+i+"="+o.seg+"&"+Kw+i+"="+o.ts+"&"+Yw+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Jw)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ce("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=16384,t0=45e3;let Gs=null;typeof MozWebSocket<"u"?Gs=MozWebSocket:typeof WebSocket<"u"&&(Gs=WebSocket);class Ze{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Oi(this.connId),this.stats_=zu(n),this.connURL=Ze.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[Xp]=Fu,typeof location<"u"&&location.hostname&&tm.test(location.hostname)&&(o[Zp]=em),n&&(o[Jp]=n),r&&(o[nm]=r),i&&(o[Na]=i),s&&(o[rm]=s),lm(e,im,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gn.set("previous_websocket_failure",!0);try{let r;ey(),this.mySock=new Gs(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Ze.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Gs!==null&&!Ze.forceDisallow_}static previouslyFailed(){return gn.isInMemoryStorage||gn.get("previous_websocket_failure")===!0}markConnectionHealthy(){gn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=mi(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(C(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=oe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Yp(n,e0);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(t0))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ze.responsesRequiredToBeHealthy=2;Ze.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Gn,Ze]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ze&&Ze.isAvailable();let r=n&&!Ze.previouslyFailed();if(e.webSocketOnly&&(n||Le("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ze];else{const i=this.transports_=[];for(const s of vi.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);vi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}vi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=6e4,r0=5e3,i0=10*1024,s0=100*1024,vl="t",Ud="d",o0="s",Wd="r",l0="e",bd="o",$d="a",Hd="n",Vd="p",a0="h";class u0{constructor(e,n,r,i,s,o,l,a,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Oi("c:"+this.id+":"),this.transportManager_=new vi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Gr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>s0?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>i0?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(vl in e){const n=e[vl];n===$d?this.upgradeIfSecondaryHealthy_():n===Wd?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===bd&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Rr("t",e),r=Rr("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Vd,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:$d,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Hd,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Rr("t",e),r=Rr("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Rr(vl,e);if(Ud in e){const r=e[Ud];if(n===a0){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Hd){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===o0?this.onConnectionShutdown_(r):n===Wd?this.onReset_(r):n===l0?Ia("Server Error: "+r):n===bd?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ia("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Fu!==r&&Le("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Gr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(n0))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Gr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(r0))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Vd,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this.allowedEvents_=e,this.listeners_={},C(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){C(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends pm{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!zp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ks}getInitialEvent(e){return C(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=32,Gd=768;class b{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function B(){return new b("")}function M(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Jt(t){return t.pieces_.length-t.pieceNum_}function V(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new b(t.pieces_,e)}function mm(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function c0(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function gm(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function _m(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new b(e,0)}function le(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof b)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new b(n,0)}function L(t){return t.pieceNum_>=t.pieces_.length}function Ie(t,e){const n=M(t),r=M(e);if(n===null)return e;if(n===r)return Ie(V(t),V(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Bu(t,e){if(Jt(t)!==Jt(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function et(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Jt(t)>Jt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class d0{constructor(e,n){this.errorPrefix_=n,this.parts_=gm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Io(this.parts_[r]);vm(this)}}function f0(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Io(e),vm(t)}function h0(t){const e=t.parts_.pop();t.byteLength_-=Io(e),t.parts_.length>0&&(t.byteLength_-=1)}function vm(t){if(t.byteLength_>Gd)throw new Error(t.errorPrefix_+"has a key path longer than "+Gd+" bytes ("+t.byteLength_+").");if(t.parts_.length>Qd)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Qd+") or object contains a cycle "+fn(t))}function fn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends pm{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Uu}getInitialEvent(e){return C(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=1e3,p0=60*5*1e3,Kd=30*1e3,m0=1.3,g0=3e4,_0="server_kill",Yd=3;class Et extends hm{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Et.nextPersistentConnectionId_++,this.log_=Oi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Pr,this.maxReconnectDelay_=p0,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Uu.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ks.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(oe(s)),C(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new ko,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),C(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),C(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;Et.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ft(e,"w")){const r=ur(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Le(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||ly(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Kd)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=oy(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),C(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+oe(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ia("Unrecognized action received from server: "+oe(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){C(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Pr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>g0&&(this.reconnectDelay_=Pr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*m0)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Et.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(c){C(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(c)};this.realtime_={close:a,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,d]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?Ce("getToken() completed but was canceled"):(Ce("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=d&&d.token,l=new u0(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,_=>{Le(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(_0)},s))}catch(c){this.log_("Failed to get token: "+c),o||(this.repoInfo_.nodeAdmin&&Le(c),a())}}}interrupt(e){Ce("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ce("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Id(this.interruptReasons_)&&(this.reconnectDelay_=Pr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Lu(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new b(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Ce("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Yd&&(this.reconnectDelay_=Kd,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ce("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Yd&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Qp.replace(/\./g,"-")]=1,zp()?e["framework.cordova"]=1:Zv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ks.getInstance().currentlyOnline();return Id(this.interruptReasons_)&&e}}Et.nextPersistentConnectionId_=0;Et.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new F(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new F(Tn,e),i=new F(Tn,n);return this.compare(r,i)!==0}minPost(){return F.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let is;class ym extends No{static get __EMPTY_NODE(){return is}static set __EMPTY_NODE(e){is=e}compare(e,n){return _r(e.name,n.name)}isDefinedOn(e){throw gr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return F.MIN}maxPost(){return new F(Xt,is)}makePost(e,n){return C(typeof e=="string","KeyIndex indexValue must always be a string."),new F(e,is)}toString(){return".key"}}const wn=new ym;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class fe{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??fe.RED,this.left=i??De.EMPTY_NODE,this.right=s??De.EMPTY_NODE}copy(e,n,r,i,s){return new fe(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return De.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return De.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}fe.RED=!0;fe.BLACK=!1;class v0{copy(e,n,r,i,s){return this}insert(e,n,r){return new fe(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class De{constructor(e,n=De.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new De(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,fe.BLACK,null,null))}remove(e){return new De(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,fe.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ss(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ss(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ss(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ss(this.root_,null,this.comparator_,!0,e)}}De.EMPTY_NODE=new v0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t,e){return _r(t.name,e.name)}function Wu(t,e){return _r(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta;function w0(t){Ta=t}const wm=function(t){return typeof t=="number"?"number:"+qp(t):"string:"+t},Em=function(t){if(t.isLeafNode()){const e=t.val();C(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ft(e,".sv"),"Priority must be a string or number.")}else C(t===Ta||t.isEmpty(),"priority of unexpected type.");C(t===Ta||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd;class ce{constructor(e,n=ce.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,C(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Em(this.priorityNode_)}static set __childrenNodeConstructor(e){qd=e}static get __childrenNodeConstructor(){return qd}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ce(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ce.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return L(e)?this:M(e)===".priority"?this.priorityNode_:ce.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ce.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=M(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(C(r!==".priority"||Jt(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ce.__childrenNodeConstructor.EMPTY_NODE.updateChild(V(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+wm(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=qp(this.value_):e+=this.value_,this.lazyHash_=Kp(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ce.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ce.__childrenNodeConstructor?-1:(C(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=ce.VALUE_TYPE_ORDER.indexOf(n),s=ce.VALUE_TYPE_ORDER.indexOf(r);return C(i>=0,"Unknown leaf type: "+n),C(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ce.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm,Sm;function E0(t){Cm=t}function C0(t){Sm=t}class S0 extends No{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?_r(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return F.MIN}maxPost(){return new F(Xt,new ce("[PRIORITY-POST]",Sm))}makePost(e,n){const r=Cm(e);return new F(n,new ce("[PRIORITY-POST]",r))}toString(){return".priority"}}const J=new S0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=Math.log(2);class I0{constructor(e){const n=s=>parseInt(Math.log(s)/k0,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ys=function(t,e,n,r){t.sort(e);const i=function(a,u){const f=u-a;let c,d;if(f===0)return null;if(f===1)return c=t[a],d=n?n(c):c,new fe(d,c.node,fe.BLACK,null,null);{const _=parseInt(f/2,10)+a,g=i(a,_),v=i(_+1,u);return c=t[_],d=n?n(c):c,new fe(d,c.node,fe.BLACK,g,v)}},s=function(a){let u=null,f=null,c=t.length;const d=function(g,v){const N=c-g,p=c;c-=g;const h=i(N+1,p),m=t[N],y=n?n(m):m;_(new fe(y,m.node,v,null,h))},_=function(g){u?(u.left=g,u=g):(f=g,u=g)};for(let g=0;g<a.count;++g){const v=a.nextBitIsOne(),N=Math.pow(2,a.count-(g+1));v?d(N,fe.BLACK):(d(N,fe.BLACK),d(N,fe.RED))}return f},o=new I0(t.length),l=s(o);return new De(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl;const Mn={};class yt{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return C(Mn&&J,"ChildrenNode.ts has not been loaded"),yl=yl||new yt({".priority":Mn},{".priority":J}),yl}get(e){const n=ur(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof De?n:null}hasIndex(e){return ft(this.indexSet_,e.toString())}addIndex(e,n){C(e!==wn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(F.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=Ys(r,e.getCompare()):l=Mn;const a=e.toString(),u=Object.assign({},this.indexSet_);u[a]=e;const f=Object.assign({},this.indexes_);return f[a]=l,new yt(f,u)}addToIndexes(e,n){const r=Hs(this.indexes_,(i,s)=>{const o=ur(this.indexSet_,s);if(C(o,"Missing index implementation for "+s),i===Mn)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(F.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),Ys(l,o.getCompare())}else return Mn;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new F(e.name,l))),a.insert(e,e.node)}});return new yt(r,this.indexSet_)}removeFromIndexes(e,n){const r=Hs(this.indexes_,i=>{if(i===Mn)return i;{const s=n.get(e.name);return s?i.remove(new F(e.name,s)):i}});return new yt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dr;class P{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Em(this.priorityNode_),this.children_.isEmpty()&&C(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Dr||(Dr=new P(new De(Wu),null,yt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Dr}updatePriority(e){return this.children_.isEmpty()?this:new P(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Dr:n}}getChild(e){const n=M(e);return n===null?this:this.getImmediateChild(n).getChild(V(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(C(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new F(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Dr:this.priorityNode_;return new P(i,o,s)}}updateChild(e,n){const r=M(e);if(r===null)return n;{C(M(e)!==".priority"||Jt(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(V(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(J,(o,l)=>{n[o]=l.val(e),r++,s&&P.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+wm(this.getPriority().val())+":"),this.forEachChild(J,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Kp(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new F(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new F(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new F(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,F.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,F.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Mi?-1:0}withIndex(e){if(e===wn||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new P(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===wn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(J),i=n.getIterator(J);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===wn?null:this.indexMap_.get(e.toString())}}P.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class N0 extends P{constructor(){super(new De(Wu),P.EMPTY_NODE,yt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return P.EMPTY_NODE}isEmpty(){return!1}}const Mi=new N0;Object.defineProperties(F,{MIN:{value:new F(Tn,P.EMPTY_NODE)},MAX:{value:new F(Xt,Mi)}});ym.__EMPTY_NODE=P.EMPTY_NODE;ce.__childrenNodeConstructor=P;w0(Mi);C0(Mi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=!0;function he(t,e=null){if(t===null)return P.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),C(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ce(n,he(e))}if(!(t instanceof Array)&&T0){const n=[];let r=!1;if(Fe(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=he(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new F(o,a)))}}),n.length===0)return P.EMPTY_NODE;const s=Ys(n,y0,o=>o.name,Wu);if(r){const o=Ys(n,J.getCompare());return new P(s,he(e),new yt({".priority":o},{".priority":J}))}else return new P(s,he(e),yt.Default)}else{let n=P.EMPTY_NODE;return Fe(t,(r,i)=>{if(ft(t,r)&&r.substring(0,1)!=="."){const s=he(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(he(e))}}E0(he);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends No{constructor(e){super(),this.indexPath_=e,C(!L(e)&&M(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?_r(e.name,n.name):s}makePost(e,n){const r=he(e),i=P.EMPTY_NODE.updateChild(this.indexPath_,r);return new F(n,i)}maxPost(){const e=P.EMPTY_NODE.updateChild(this.indexPath_,Mi);return new F(Xt,e)}toString(){return gm(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0 extends No{compare(e,n){const r=e.node.compareTo(n.node);return r===0?_r(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return F.MIN}maxPost(){return F.MAX}makePost(e,n){const r=he(e);return new F(n,r)}toString(){return".value"}}const km=new x0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t){return{type:"value",snapshotNode:t}}function cr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function yi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function wi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function R0(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){C(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(yi(n,l)):C(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(cr(n,r)):o.trackChildChange(wi(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(J,(i,s)=>{n.hasChild(i)||r.trackChildChange(yi(i,s))}),n.isLeafNode()||n.forEachChild(J,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(wi(i,s,o))}else r.trackChildChange(cr(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?P.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.indexedFilter_=new $u(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ei.getStartPost_(e),this.endPost_=Ei.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new F(n,r))||(r=P.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=P.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(P.EMPTY_NODE);const s=this;return n.forEachChild(J,(o,l)=>{s.matches(new F(o,l))||(i=i.updateImmediateChild(o,P.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ei(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new F(n,r))||(r=P.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=P.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=P.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(P.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,P.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const c=this.index_.getCompare();o=(d,_)=>c(_,d)}else o=this.index_.getCompare();const l=e;C(l.numChildren()===this.limit_,"");const a=new F(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),f=this.rangedFilter_.matches(a);if(l.hasChild(n)){const c=l.getImmediateChild(n);let d=i.getChildAfterChild(this.index_,u,this.reverse_);for(;d!=null&&(d.name===n||l.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);const _=d==null?1:o(d,a);if(f&&!r.isEmpty()&&_>=0)return s!=null&&s.trackChildChange(wi(n,r,c)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(yi(n,c));const v=l.updateImmediateChild(n,P.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(s!=null&&s.trackChildChange(cr(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}}else return r.isEmpty()?e:f&&o(u,a)>=0?(s!=null&&(s.trackChildChange(yi(u.name,u.node)),s.trackChildChange(cr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,P.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=J}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return C(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return C(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Tn}hasEnd(){return this.endSet_}getIndexEndValue(){return C(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return C(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return C(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===J}copy(){const e=new Hu;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function D0(t){return t.loadsAllData()?new $u(t.getIndex()):t.hasLimit()?new P0(t):new Ei(t)}function A0(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function O0(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function M0(t,e){const n=t.copy();return n.index_=e,n}function Xd(t){const e={};if(t.isDefault())return e;let n;if(t.index_===J?n="$priority":t.index_===km?n="$value":t.index_===wn?n="$key":(C(t.index_ instanceof bu,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=oe(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=oe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+oe(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=oe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+oe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Jd(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==J&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends hm{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Oi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(C(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=qs.getListenId_(e,r),l={};this.listens_[o]=l;const a=Xd(e._queryParams);this.restRequest_(s+".json",a,(u,f)=>{let c=f;if(u===404&&(c=null,u=null),u===null&&this.onDataUpdate_(s,c,!1,r),ur(this.listens_,o)===l){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",i(d,null)}})}unlisten(e,n){const r=qs.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Xd(e._queryParams),r=e._path.toString(),i=new ko;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ay(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=mi(l.responseText)}catch{Le("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&Le("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.rootNode_=P.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(){return{value:null,children:new Map}}function Nm(t,e,n){if(L(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=M(e);t.children.has(r)||t.children.set(r,Xs());const i=t.children.get(r);e=V(e),Nm(i,e,n)}}function xa(t,e,n){t.value!==null?n(e,t.value):F0(t,(r,i)=>{const s=new b(e.toString()+"/"+r);xa(i,s,n)})}function F0(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Fe(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=10*1e3,j0=30*1e3,B0=5*60*1e3;class U0{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new z0(e);const r=Zd+(j0-Zd)*Math.random();Gr(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Fe(e,(i,s)=>{s>0&&ft(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Gr(this.reportStats_.bind(this),Math.floor(Math.random()*2*B0))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(tt||(tt={}));function Tm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Vu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Qu(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=tt.ACK_USER_WRITE,this.source=Tm()}operationForChild(e){if(L(this.path)){if(this.affectedTree.value!=null)return C(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new b(e));return new Js(B(),n,this.revert)}}else return C(M(this.path)===e,"operationForChild called for unrelated child."),new Js(V(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n){this.source=e,this.path=n,this.type=tt.LISTEN_COMPLETE}operationForChild(e){return L(this.path)?new Ci(this.source,B()):new Ci(this.source,V(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=tt.OVERWRITE}operationForChild(e){return L(this.path)?new xn(this.source,B(),this.snap.getImmediateChild(e)):new xn(this.source,V(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=tt.MERGE}operationForChild(e){if(L(this.path)){const n=this.children.subtree(new b(e));return n.isEmpty()?null:n.value?new xn(this.source,B(),n.value):new Si(this.source,B(),n)}else return C(M(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Si(this.source,V(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(L(e))return this.isFullyInitialized()&&!this.filtered_;const n=M(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function b0(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(R0(o.childName,o.snapshotNode))}),Ar(t,i,"child_removed",e,r,n),Ar(t,i,"child_added",e,r,n),Ar(t,i,"child_moved",s,r,n),Ar(t,i,"child_changed",e,r,n),Ar(t,i,"value",e,r,n),i}function Ar(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>H0(t,l,a)),o.forEach(l=>{const a=$0(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function $0(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function H0(t,e,n){if(e.childName==null||n.childName==null)throw gr("Should only compare child_ events.");const r=new F(e.childName,e.snapshotNode),i=new F(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t,e){return{eventCache:t,serverCache:e}}function Kr(t,e,n,r){return To(new Zt(e,n,r),t.serverCache)}function xm(t,e,n,r){return To(t.eventCache,new Zt(e,n,r))}function Zs(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Rn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl;const V0=()=>(wl||(wl=new De(Rw)),wl);class K{constructor(e,n=V0()){this.value=e,this.children=n}static fromObject(e){let n=new K(null);return Fe(e,(r,i)=>{n=n.set(new b(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:B(),value:this.value};if(L(e))return null;{const r=M(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(V(e),n);return s!=null?{path:le(new b(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(L(e))return this;{const n=M(e),r=this.children.get(n);return r!==null?r.subtree(V(e)):new K(null)}}set(e,n){if(L(e))return new K(n,this.children);{const r=M(e),s=(this.children.get(r)||new K(null)).set(V(e),n),o=this.children.insert(r,s);return new K(this.value,o)}}remove(e){if(L(e))return this.children.isEmpty()?new K(null):new K(null,this.children);{const n=M(e),r=this.children.get(n);if(r){const i=r.remove(V(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new K(null):new K(this.value,s)}else return this}}get(e){if(L(e))return this.value;{const n=M(e),r=this.children.get(n);return r?r.get(V(e)):null}}setTree(e,n){if(L(e))return n;{const r=M(e),s=(this.children.get(r)||new K(null)).setTree(V(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new K(this.value,o)}}fold(e){return this.fold_(B(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(le(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,B(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(L(e))return null;{const s=M(e),o=this.children.get(s);return o?o.findOnPath_(V(e),le(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,B(),n)}foreachOnPath_(e,n,r){if(L(e))return this;{this.value&&r(n,this.value);const i=M(e),s=this.children.get(i);return s?s.foreachOnPath_(V(e),le(n,i),r):new K(null)}}foreach(e){this.foreach_(B(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(le(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.writeTree_=e}static empty(){return new it(new K(null))}}function Yr(t,e,n){if(L(e))return new it(new K(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Ie(i,e);return s=s.updateChild(o,n),new it(t.writeTree_.set(i,s))}else{const i=new K(n),s=t.writeTree_.setTree(e,i);return new it(s)}}}function ef(t,e,n){let r=t;return Fe(n,(i,s)=>{r=Yr(r,le(e,i),s)}),r}function tf(t,e){if(L(e))return it.empty();{const n=t.writeTree_.setTree(e,new K(null));return new it(n)}}function Ra(t,e){return An(t,e)!=null}function An(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ie(n.path,e)):null}function nf(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(J,(r,i)=>{e.push(new F(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new F(r,i.value))}),e}function Gt(t,e){if(L(e))return t;{const n=An(t,e);return n!=null?new it(new K(n)):new it(t.writeTree_.subtree(e))}}function Pa(t){return t.writeTree_.isEmpty()}function dr(t,e){return Rm(B(),t.writeTree_,e)}function Rm(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(C(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Rm(le(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(le(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t,e){return Om(e,t)}function Q0(t,e,n,r,i){C(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Yr(t.visibleWrites,e,n)),t.lastWriteId=r}function G0(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function K0(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);C(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&Y0(l,r.path)?i=!1:et(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return q0(t),!0;if(r.snap)t.visibleWrites=tf(t.visibleWrites,r.path);else{const l=r.children;Fe(l,a=>{t.visibleWrites=tf(t.visibleWrites,le(r.path,a))})}return!0}else return!1}function Y0(t,e){if(t.snap)return et(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&et(le(t.path,n),e))return!0;return!1}function q0(t){t.visibleWrites=Pm(t.allWrites,X0,B()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function X0(t){return t.visible}function Pm(t,e,n){let r=it.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)et(n,o)?(l=Ie(n,o),r=Yr(r,l,s.snap)):et(o,n)&&(l=Ie(o,n),r=Yr(r,B(),s.snap.getChild(l)));else if(s.children){if(et(n,o))l=Ie(n,o),r=ef(r,l,s.children);else if(et(o,n))if(l=Ie(o,n),L(l))r=ef(r,B(),s.children);else{const a=ur(s.children,M(l));if(a){const u=a.getChild(V(l));r=Yr(r,B(),u)}}}else throw gr("WriteRecord should have .snap or .children")}}return r}function Dm(t,e,n,r,i){if(!r&&!i){const s=An(t.visibleWrites,e);if(s!=null)return s;{const o=Gt(t.visibleWrites,e);if(Pa(o))return n;if(n==null&&!Ra(o,B()))return null;{const l=n||P.EMPTY_NODE;return dr(o,l)}}}else{const s=Gt(t.visibleWrites,e);if(!i&&Pa(s))return n;if(!i&&n==null&&!Ra(s,B()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(et(u.path,e)||et(e,u.path))},l=Pm(t.allWrites,o,e),a=n||P.EMPTY_NODE;return dr(l,a)}}}function J0(t,e,n){let r=P.EMPTY_NODE;const i=An(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(J,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Gt(t.visibleWrites,e);return n.forEachChild(J,(o,l)=>{const a=dr(Gt(s,new b(o)),l);r=r.updateImmediateChild(o,a)}),nf(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Gt(t.visibleWrites,e);return nf(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Z0(t,e,n,r,i){C(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=le(e,n);if(Ra(t.visibleWrites,s))return null;{const o=Gt(t.visibleWrites,s);return Pa(o)?i.getChild(n):dr(o,i.getChild(n))}}function eE(t,e,n,r){const i=le(e,n),s=An(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Gt(t.visibleWrites,i);return dr(o,r.getNode().getImmediateChild(n))}else return null}function tE(t,e){return An(t.visibleWrites,e)}function nE(t,e,n,r,i,s,o){let l;const a=Gt(t.visibleWrites,e),u=An(a,B());if(u!=null)l=u;else if(n!=null)l=dr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const f=[],c=o.getCompare(),d=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let _=d.getNext();for(;_&&f.length<i;)c(_,r)!==0&&f.push(_),_=d.getNext();return f}else return[]}function rE(){return{visibleWrites:it.empty(),allWrites:[],lastWriteId:-1}}function eo(t,e,n,r){return Dm(t.writeTree,t.treePath,e,n,r)}function Gu(t,e){return J0(t.writeTree,t.treePath,e)}function rf(t,e,n,r){return Z0(t.writeTree,t.treePath,e,n,r)}function to(t,e){return tE(t.writeTree,le(t.treePath,e))}function iE(t,e,n,r,i,s){return nE(t.writeTree,t.treePath,e,n,r,i,s)}function Ku(t,e,n){return eE(t.writeTree,t.treePath,e,n)}function Am(t,e){return Om(le(t.treePath,e),t.writeTree)}function Om(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;C(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),C(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,wi(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,yi(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,cr(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,wi(r,e.snapshotNode,i.oldSnap));else throw gr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Mm=new oE;class Yu{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Zt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ku(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Rn(this.viewCache_),s=iE(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t){return{filter:t}}function aE(t,e){C(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),C(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function uE(t,e,n,r,i){const s=new sE;let o,l;if(n.type===tt.OVERWRITE){const u=n;u.source.fromUser?o=Da(t,e,u.path,u.snap,r,i,s):(C(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!L(u.path),o=no(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===tt.MERGE){const u=n;u.source.fromUser?o=dE(t,e,u.path,u.children,r,i,s):(C(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=Aa(t,e,u.path,u.children,r,i,l,s))}else if(n.type===tt.ACK_USER_WRITE){const u=n;u.revert?o=pE(t,e,u.path,r,i,s):o=fE(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===tt.LISTEN_COMPLETE)o=hE(t,e,n.path,r,s);else throw gr("Unknown operation type: "+n.type);const a=s.getChanges();return cE(e,o,a),{viewCache:o,changes:a}}function cE(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Zs(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Im(Zs(e)))}}function Lm(t,e,n,r,i,s){const o=e.eventCache;if(to(r,n)!=null)return e;{let l,a;if(L(n))if(C(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Rn(e),f=u instanceof P?u:P.EMPTY_NODE,c=Gu(r,f);l=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const u=eo(r,Rn(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=M(n);if(u===".priority"){C(Jt(n)===1,"Can't have a priority with additional path components");const f=o.getNode();a=e.serverCache.getNode();const c=rf(r,n,f,a);c!=null?l=t.filter.updatePriority(f,c):l=o.getNode()}else{const f=V(n);let c;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const d=rf(r,n,o.getNode(),a);d!=null?c=o.getNode().getImmediateChild(u).updateChild(f,d):c=o.getNode().getImmediateChild(u)}else c=Ku(r,u,e.serverCache);c!=null?l=t.filter.updateChild(o.getNode(),u,c,f,i,s):l=o.getNode()}}return Kr(e,l,o.isFullyInitialized()||L(n),t.filter.filtersNodes())}}function no(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const f=o?t.filter:t.filter.getIndexedFilter();if(L(n))u=f.updateFullNode(a.getNode(),r,null);else if(f.filtersNodes()&&!a.isFiltered()){const _=a.getNode().updateChild(n,r);u=f.updateFullNode(a.getNode(),_,null)}else{const _=M(n);if(!a.isCompleteForPath(n)&&Jt(n)>1)return e;const g=V(n),N=a.getNode().getImmediateChild(_).updateChild(g,r);_===".priority"?u=f.updatePriority(a.getNode(),N):u=f.updateChild(a.getNode(),_,N,g,Mm,null)}const c=xm(e,u,a.isFullyInitialized()||L(n),f.filtersNodes()),d=new Yu(i,c,s);return Lm(t,c,n,i,d,l)}function Da(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const f=new Yu(i,e,s);if(L(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=Kr(e,u,!0,t.filter.filtersNodes());else{const c=M(n);if(c===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Kr(e,u,l.isFullyInitialized(),l.isFiltered());else{const d=V(n),_=l.getNode().getImmediateChild(c);let g;if(L(d))g=r;else{const v=f.getCompleteChild(c);v!=null?mm(d)===".priority"&&v.getChild(_m(d)).isEmpty()?g=v:g=v.updateChild(d,r):g=P.EMPTY_NODE}if(_.equals(g))a=e;else{const v=t.filter.updateChild(l.getNode(),c,g,d,f,o);a=Kr(e,v,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function sf(t,e){return t.eventCache.isCompleteForChild(e)}function dE(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const f=le(n,a);sf(e,M(f))&&(l=Da(t,l,f,u,i,s,o))}),r.foreach((a,u)=>{const f=le(n,a);sf(e,M(f))||(l=Da(t,l,f,u,i,s,o))}),l}function of(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Aa(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;L(n)?u=r:u=new K(null).setTree(n,r);const f=e.serverCache.getNode();return u.children.inorderTraversal((c,d)=>{if(f.hasChild(c)){const _=e.serverCache.getNode().getImmediateChild(c),g=of(t,_,d);a=no(t,a,new b(c),g,i,s,o,l)}}),u.children.inorderTraversal((c,d)=>{const _=!e.serverCache.isCompleteForChild(c)&&d.value===null;if(!f.hasChild(c)&&!_){const g=e.serverCache.getNode().getImmediateChild(c),v=of(t,g,d);a=no(t,a,new b(c),v,i,s,o,l)}}),a}function fE(t,e,n,r,i,s,o){if(to(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(L(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return no(t,e,n,a.getNode().getChild(n),i,s,l,o);if(L(n)){let u=new K(null);return a.getNode().forEachChild(wn,(f,c)=>{u=u.set(new b(f),c)}),Aa(t,e,n,u,i,s,l,o)}else return e}else{let u=new K(null);return r.foreach((f,c)=>{const d=le(n,f);a.isCompleteForPath(d)&&(u=u.set(f,a.getNode().getChild(d)))}),Aa(t,e,n,u,i,s,l,o)}}function hE(t,e,n,r,i){const s=e.serverCache,o=xm(e,s.getNode(),s.isFullyInitialized()||L(n),s.isFiltered());return Lm(t,o,n,r,Mm,i)}function pE(t,e,n,r,i,s){let o;if(to(r,n)!=null)return e;{const l=new Yu(r,e,i),a=e.eventCache.getNode();let u;if(L(n)||M(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=eo(r,Rn(e));else{const c=e.serverCache.getNode();C(c instanceof P,"serverChildren would be complete if leaf node"),f=Gu(r,c)}f=f,u=t.filter.updateFullNode(a,f,s)}else{const f=M(n);let c=Ku(r,f,e.serverCache);c==null&&e.serverCache.isCompleteForChild(f)&&(c=a.getImmediateChild(f)),c!=null?u=t.filter.updateChild(a,f,c,V(n),l,s):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(a,f,P.EMPTY_NODE,V(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=eo(r,Rn(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||to(r,B())!=null,Kr(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new $u(r.getIndex()),s=D0(r);this.processor_=lE(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(P.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(P.EMPTY_NODE,l.getNode(),null),f=new Zt(a,o.isFullyInitialized(),i.filtersNodes()),c=new Zt(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=To(c,f),this.eventGenerator_=new W0(this.query_)}get query(){return this.query_}}function gE(t){return t.viewCache_.serverCache.getNode()}function _E(t){return Zs(t.viewCache_)}function vE(t,e){const n=Rn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!L(e)&&!n.getImmediateChild(M(e)).isEmpty())?n.getChild(e):null}function lf(t){return t.eventRegistrations_.length===0}function yE(t,e){t.eventRegistrations_.push(e)}function af(t,e,n){const r=[];if(n){C(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function uf(t,e,n,r){e.type===tt.MERGE&&e.source.queryId!==null&&(C(Rn(t.viewCache_),"We should always have a full cache before handling merges"),C(Zs(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=uE(t.processor_,i,e,n,r);return aE(t.processor_,s.viewCache),C(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Fm(t,s.changes,s.viewCache.eventCache.getNode(),null)}function wE(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(J,(s,o)=>{r.push(cr(s,o))}),n.isFullyInitialized()&&r.push(Im(n.getNode())),Fm(t,r,n.getNode(),e)}function Fm(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return b0(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ro;class zm{constructor(){this.views=new Map}}function EE(t){C(!ro,"__referenceConstructor has already been defined"),ro=t}function CE(){return C(ro,"Reference.ts has not been loaded"),ro}function SE(t){return t.views.size===0}function qu(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return C(s!=null,"SyncTree gave us an op for an invalid query."),uf(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(uf(o,e,n,r));return s}}function jm(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=eo(n,i?r:null),a=!1;l?a=!0:r instanceof P?(l=Gu(n,r),a=!1):(l=P.EMPTY_NODE,a=!1);const u=To(new Zt(l,a,!1),new Zt(r,i,!1));return new mE(e,u)}return o}function kE(t,e,n,r,i,s){const o=jm(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),yE(o,n),wE(o,n)}function IE(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=en(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(af(u,n,r)),lf(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(af(a,n,r)),lf(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!en(t)&&s.push(new(CE())(e._repo,e._path)),{removed:s,events:o}}function Bm(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Kt(t,e){let n=null;for(const r of t.views.values())n=n||vE(r,e);return n}function Um(t,e){if(e._queryParams.loadsAllData())return Ro(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Wm(t,e){return Um(t,e)!=null}function en(t){return Ro(t)!=null}function Ro(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io;function NE(t){C(!io,"__referenceConstructor has already been defined"),io=t}function TE(){return C(io,"Reference.ts has not been loaded"),io}let xE=1;class cf{constructor(e){this.listenProvider_=e,this.syncPointTree_=new K(null),this.pendingWriteTree_=rE(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bm(t,e,n,r,i){return Q0(t.pendingWriteTree_,e,n,r,i),i?Fi(t,new xn(Tm(),e,n)):[]}function _n(t,e,n=!1){const r=G0(t.pendingWriteTree_,e);if(K0(t.pendingWriteTree_,e)){let s=new K(null);return r.snap!=null?s=s.set(B(),!0):Fe(r.children,o=>{s=s.set(new b(o),!0)}),Fi(t,new Js(r.path,s,n))}else return[]}function Li(t,e,n){return Fi(t,new xn(Vu(),e,n))}function RE(t,e,n){const r=K.fromObject(n);return Fi(t,new Si(Vu(),e,r))}function PE(t,e){return Fi(t,new Ci(Vu(),e))}function DE(t,e,n){const r=Ju(t,n);if(r){const i=Zu(r),s=i.path,o=i.queryId,l=Ie(s,e),a=new Ci(Qu(o),l);return ec(t,s,a)}else return[]}function so(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||Wm(o,e))){const a=IE(o,e,n,r);SE(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const f=u.findIndex(d=>d._queryParams.loadsAllData())!==-1,c=t.syncPointTree_.findOnPath(s,(d,_)=>en(_));if(f&&!c){const d=t.syncPointTree_.subtree(s);if(!d.isEmpty()){const _=ME(d);for(let g=0;g<_.length;++g){const v=_[g],N=v.query,p=Qm(t,v);t.listenProvider_.startListening(qr(N),ki(t,N),p.hashFn,p.onComplete)}}}!c&&u.length>0&&!r&&(f?t.listenProvider_.stopListening(qr(e),null):u.forEach(d=>{const _=t.queryToTagMap.get(Po(d));t.listenProvider_.stopListening(qr(d),_)}))}LE(t,u)}return l}function $m(t,e,n,r){const i=Ju(t,r);if(i!=null){const s=Zu(i),o=s.path,l=s.queryId,a=Ie(o,e),u=new xn(Qu(l),a,n);return ec(t,o,u)}else return[]}function AE(t,e,n,r){const i=Ju(t,r);if(i){const s=Zu(i),o=s.path,l=s.queryId,a=Ie(o,e),u=K.fromObject(n),f=new Si(Qu(l),a,u);return ec(t,o,f)}else return[]}function Oa(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(d,_)=>{const g=Ie(d,i);s=s||Kt(_,g),o=o||en(_)});let l=t.syncPointTree_.get(i);l?(o=o||en(l),s=s||Kt(l,B())):(l=new zm,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=P.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((_,g)=>{const v=Kt(g,B());v&&(s=s.updateImmediateChild(_,v))}));const u=Wm(l,e);if(!u&&!e._queryParams.loadsAllData()){const d=Po(e);C(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const _=FE();t.queryToTagMap.set(d,_),t.tagToQueryMap.set(_,d)}const f=xo(t.pendingWriteTree_,i);let c=kE(l,e,n,f,s,a);if(!u&&!o&&!r){const d=Um(l,e);c=c.concat(zE(t,e,d))}return c}function Xu(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=Ie(o,e),u=Kt(l,a);if(u)return u});return Dm(i,e,s,n,!0)}function OE(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,f)=>{const c=Ie(u,n);r=r||Kt(f,c)});let i=t.syncPointTree_.get(n);i?r=r||Kt(i,B()):(i=new zm,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new Zt(r,!0,!1):null,l=xo(t.pendingWriteTree_,e._path),a=jm(i,e,l,s?o.getNode():P.EMPTY_NODE,s);return _E(a)}function Fi(t,e){return Hm(e,t.syncPointTree_,null,xo(t.pendingWriteTree_,B()))}function Hm(t,e,n,r){if(L(t.path))return Vm(t,e,n,r);{const i=e.get(B());n==null&&i!=null&&(n=Kt(i,B()));let s=[];const o=M(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,f=Am(r,o);s=s.concat(Hm(l,a,u,f))}return i&&(s=s.concat(qu(i,t,r,n))),s}}function Vm(t,e,n,r){const i=e.get(B());n==null&&i!=null&&(n=Kt(i,B()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=Am(r,o),f=t.operationForChild(o);f&&(s=s.concat(Vm(f,l,a,u)))}),i&&(s=s.concat(qu(i,t,r,n))),s}function Qm(t,e){const n=e.query,r=ki(t,n);return{hashFn:()=>(gE(e)||P.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?DE(t,n._path,r):PE(t,n._path);{const s=Aw(i,n);return so(t,n,null,s)}}}}function ki(t,e){const n=Po(e);return t.queryToTagMap.get(n)}function Po(t){return t._path.toString()+"$"+t._queryIdentifier}function Ju(t,e){return t.tagToQueryMap.get(e)}function Zu(t){const e=t.indexOf("$");return C(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new b(t.substr(0,e))}}function ec(t,e,n){const r=t.syncPointTree_.get(e);C(r,"Missing sync point for query tag that we're tracking");const i=xo(t.pendingWriteTree_,e);return qu(r,n,i,null)}function ME(t){return t.fold((e,n,r)=>{if(n&&en(n))return[Ro(n)];{let i=[];return n&&(i=Bm(n)),Fe(r,(s,o)=>{i=i.concat(o)}),i}})}function qr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(TE())(t._repo,t._path):t}function LE(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Po(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function FE(){return xE++}function zE(t,e,n){const r=e._path,i=ki(t,e),s=Qm(t,n),o=t.listenProvider_.startListening(qr(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)C(!en(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,f,c)=>{if(!L(u)&&f&&en(f))return[Ro(f).query];{let d=[];return f&&(d=d.concat(Bm(f).map(_=>_.query))),Fe(c,(_,g)=>{d=d.concat(g)}),d}});for(let u=0;u<a.length;++u){const f=a[u];t.listenProvider_.stopListening(qr(f),ki(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new tc(n)}node(){return this.node_}}class nc{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=le(this.path_,e);return new nc(this.syncTree_,n)}node(){return Xu(this.syncTree_,this.path_)}}const jE=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},df=function(t,e,n){if(!t||typeof t!="object")return t;if(C(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return BE(t[".sv"],e,n);if(typeof t[".sv"]=="object")return UE(t[".sv"],e);C(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},BE=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:C(!1,"Unexpected server value: "+t)}},UE=function(t,e,n){t.hasOwnProperty("increment")||C(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&C(!1,"Unexpected increment value: "+r);const i=e.node();if(C(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},WE=function(t,e,n,r){return rc(e,new nc(n,t),r)},Gm=function(t,e,n){return rc(t,new tc(e),n)};function rc(t,e,n){const r=t.getPriority().val(),i=df(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=df(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new ce(l,he(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ce(i))),o.forEachChild(J,(l,a)=>{const u=rc(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function sc(t,e){let n=e instanceof b?e:new b(e),r=t,i=M(n);for(;i!==null;){const s=ur(r.node.children,i)||{children:{},childCount:0};r=new ic(i,r,s),n=V(n),i=M(n)}return r}function yr(t){return t.node.value}function Km(t,e){t.node.value=e,Ma(t)}function Ym(t){return t.node.childCount>0}function bE(t){return yr(t)===void 0&&!Ym(t)}function Do(t,e){Fe(t.node.children,(n,r)=>{e(new ic(n,t,r))})}function qm(t,e,n,r){n&&e(t),Do(t,i=>{qm(i,e,!0)})}function $E(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function zi(t){return new b(t.parent===null?t.name:zi(t.parent)+"/"+t.name)}function Ma(t){t.parent!==null&&HE(t.parent,t.name,t)}function HE(t,e,n){const r=bE(n),i=ft(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ma(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Ma(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=/[\[\].#$\/\u0000-\u001F\u007F]/,QE=/[\[\].#$\u0000-\u001F\u007F]/,El=10*1024*1024,Xm=function(t){return typeof t=="string"&&t.length!==0&&!VE.test(t)},Jm=function(t){return typeof t=="string"&&t.length!==0&&!QE.test(t)},GE=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Jm(t)},ff=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Mu(t)||t&&typeof t=="object"&&ft(t,".sv")},ji=function(t,e,n,r){r&&e===void 0||oc(Au(t,"value"),e,n)},oc=function(t,e,n){const r=n instanceof b?new d0(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+fn(r));if(typeof e=="function")throw new Error(t+"contains a function "+fn(r)+" with contents = "+e.toString());if(Mu(e))throw new Error(t+"contains "+e.toString()+" "+fn(r));if(typeof e=="string"&&e.length>El/3&&Io(e)>El)throw new Error(t+"contains a string greater than "+El+" utf8 bytes "+fn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Fe(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Xm(o)))throw new Error(t+" contains an invalid key ("+o+") "+fn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);f0(r,o),oc(t,l,r),h0(r)}),i&&s)throw new Error(t+' contains ".value" child '+fn(r)+" in addition to actual children.")}},lc=function(t,e,n,r){if(!Jm(n))throw new Error(Au(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},KE=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lc(t,e,n)},Zm=function(t,e){if(M(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},YE=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Xm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!GE(n))throw new Error(Au(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ac(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Bu(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function eg(t,e,n){ac(t,n),tg(t,r=>Bu(r,e))}function dt(t,e,n){ac(t,n),tg(t,r=>et(r,e)||et(e,r))}function tg(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(XE(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function XE(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Qr&&Ce("event: "+n.toString()),vr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="repo_interrupt",ZE=25;class eC{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xs(),this.transactionQueueTree_=new ic,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tC(t,e,n){if(t.stats_=zu(t.repoInfo_),t.forceRestClient_||Fw())t.server_=new qs(t.repoInfo_,(r,i,s,o)=>{hf(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>pf(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{oe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Et(t.repoInfo_,e,(r,i,s,o)=>{hf(t,r,i,s,o)},r=>{pf(t,r)},r=>{nC(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Ww(t.repoInfo_,()=>new U0(t.stats_,t.server_)),t.infoData_=new L0,t.infoSyncTree_=new cf({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=Li(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),cc(t,"connected",!1),t.serverSyncTree_=new cf({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);dt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function ng(t){const n=t.infoData_.getNode(new b(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function uc(t){return jE({timestamp:ng(t)})}function hf(t,e,n,r,i){t.dataUpdateCount++;const s=new b(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=Hs(n,u=>he(u));o=AE(t.serverSyncTree_,s,a,i)}else{const a=he(n);o=$m(t.serverSyncTree_,s,a,i)}else if(r){const a=Hs(n,u=>he(u));o=RE(t.serverSyncTree_,s,a)}else{const a=he(n);o=Li(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=Oo(t,s)),dt(t.eventQueue_,l,o)}function pf(t,e){cc(t,"connected",e),e===!1&&sC(t)}function nC(t,e){Fe(e,(n,r)=>{cc(t,n,r)})}function cc(t,e,n){const r=new b("/.info/"+e),i=he(n);t.infoData_.updateSnapshot(r,i);const s=Li(t.infoSyncTree_,r,i);dt(t.eventQueue_,r,s)}function rg(t){return t.nextWriteId_++}function rC(t,e,n){const r=OE(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=he(i).withIndex(e._queryParams.getIndex());Oa(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Li(t.serverSyncTree_,e._path,s);else{const l=ki(t.serverSyncTree_,e);o=$m(t.serverSyncTree_,e._path,s,l)}return dt(t.eventQueue_,e._path,o),so(t.serverSyncTree_,e,n,null,!0),s},i=>(Ao(t,"get for query "+oe(e)+" failed: "+i),Promise.reject(new Error(i))))}function iC(t,e,n,r,i){Ao(t,"set",{path:e.toString(),value:n,priority:r});const s=uc(t),o=he(n,r),l=Xu(t.serverSyncTree_,e),a=Gm(o,l,s),u=rg(t),f=bm(t.serverSyncTree_,e,a,u,!0);ac(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(d,_)=>{const g=d==="ok";g||Le("set at "+e+" failed: "+d);const v=_n(t.serverSyncTree_,u,!g);dt(t.eventQueue_,e,v),uC(t,i,d,_)});const c=ag(t,e);Oo(t,c),dt(t.eventQueue_,c,[])}function sC(t){Ao(t,"onDisconnectEvents");const e=uc(t),n=Xs();xa(t.onDisconnect_,B(),(i,s)=>{const o=WE(i,s,t.serverSyncTree_,e);Nm(n,i,o)});let r=[];xa(n,B(),(i,s)=>{r=r.concat(Li(t.serverSyncTree_,i,s));const o=ag(t,i);Oo(t,o)}),t.onDisconnect_=Xs(),dt(t.eventQueue_,B(),r)}function oC(t,e,n){let r;M(e._path)===".info"?r=Oa(t.infoSyncTree_,e,n):r=Oa(t.serverSyncTree_,e,n),eg(t.eventQueue_,e._path,r)}function lC(t,e,n){let r;M(e._path)===".info"?r=so(t.infoSyncTree_,e,n):r=so(t.serverSyncTree_,e,n),eg(t.eventQueue_,e._path,r)}function aC(t){t.persistentConnection_&&t.persistentConnection_.interrupt(JE)}function Ao(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ce(n,...e)}function uC(t,e,n,r){e&&vr(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function ig(t,e,n){return Xu(t.serverSyncTree_,e,n)||P.EMPTY_NODE}function dc(t,e=t.transactionQueueTree_){if(e||Mo(t,e),yr(e)){const n=og(t,e);C(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&cC(t,zi(e),n)}else Ym(e)&&Do(e,n=>{dc(t,n)})}function cC(t,e,n){const r=n.map(u=>u.currentWriteId),i=ig(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const f=n[u];C(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const c=Ie(e,f.path);s=s.updateChild(c,f.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{Ao(t,"transaction put response",{path:a.toString(),status:u});let f=[];if(u==="ok"){const c=[];for(let d=0;d<n.length;d++)n[d].status=2,f=f.concat(_n(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&c.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Mo(t,sc(t.transactionQueueTree_,e)),dc(t,t.transactionQueueTree_),dt(t.eventQueue_,e,f);for(let d=0;d<c.length;d++)vr(c[d])}else{if(u==="datastale")for(let c=0;c<n.length;c++)n[c].status===3?n[c].status=4:n[c].status=0;else{Le("transaction at "+a.toString()+" failed: "+u);for(let c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=u}Oo(t,e)}},o)}function Oo(t,e){const n=sg(t,e),r=zi(n),i=og(t,n);return dC(t,i,r),r}function dC(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=Ie(n,a.path);let f=!1,c;if(C(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)f=!0,c=a.abortReason,i=i.concat(_n(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=ZE)f=!0,c="maxretry",i=i.concat(_n(t.serverSyncTree_,a.currentWriteId,!0));else{const d=ig(t,a.path,o);a.currentInputSnapshot=d;const _=e[l].update(d.val());if(_!==void 0){oc("transaction failed: Data returned ",_,a.path);let g=he(_);typeof _=="object"&&_!=null&&ft(_,".priority")||(g=g.updatePriority(d.getPriority()));const N=a.currentWriteId,p=uc(t),h=Gm(g,d,p);a.currentOutputSnapshotRaw=g,a.currentOutputSnapshotResolved=h,a.currentWriteId=rg(t),o.splice(o.indexOf(N),1),i=i.concat(bm(t.serverSyncTree_,a.path,h,a.currentWriteId,a.applyLocally)),i=i.concat(_n(t.serverSyncTree_,N,!0))}else f=!0,c="nodata",i=i.concat(_n(t.serverSyncTree_,a.currentWriteId,!0))}dt(t.eventQueue_,n,i),i=[],f&&(e[l].status=2,function(d){setTimeout(d,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(c==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(c),!1,null))))}Mo(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)vr(r[l]);dc(t,t.transactionQueueTree_)}function sg(t,e){let n,r=t.transactionQueueTree_;for(n=M(e);n!==null&&yr(r)===void 0;)r=sc(r,n),e=V(e),n=M(e);return r}function og(t,e){const n=[];return lg(t,e,n),n.sort((r,i)=>r.order-i.order),n}function lg(t,e,n){const r=yr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Do(e,i=>{lg(t,i,n)})}function Mo(t,e){const n=yr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Km(e,n.length>0?n:void 0)}Do(e,r=>{Mo(t,r)})}function ag(t,e){const n=zi(sg(t,e)),r=sc(t.transactionQueueTree_,e);return $E(r,i=>{Cl(t,i)}),Cl(t,r),qm(r,i=>{Cl(t,i)}),n}function Cl(t,e){const n=yr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(C(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(C(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(_n(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Km(e,void 0):n.length=s+1,dt(t.eventQueue_,zi(e),i);for(let o=0;o<r.length;o++)vr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function hC(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Le(`Invalid query segment '${n}' in query '${t}'`)}return e}const mf=function(t,e){const n=pC(t),r=n.namespace;n.domain==="firebase.com"&&Nt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Nt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Tw();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new om(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new b(n.pathString)}},pC=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let c=t.indexOf("?");c===-1&&(c=t.length),e=t.substring(0,Math.min(f,c)),f<c&&(i=fC(t.substring(f,c)));const d=hC(t.substring(Math.min(t.length,c)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const _=e.slice(0,u);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",mC=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=gf.charAt(n%64),n=Math.floor(n/64);C(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=gf.charAt(e[i]);return C(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+oe(this.snapshot.exportVal())}}class _C{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return C(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return L(this._path)?null:mm(this._path)}get ref(){return new xt(this._repo,this._path)}get _queryIdentifier(){const e=Jd(this._queryParams),n=Lu(e);return n==="{}"?"default":n}get _queryObject(){return Jd(this._queryParams)}isEqual(e){if(e=sn(e),!(e instanceof wr))return!1;const n=this._repo===e._repo,r=Bu(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+c0(this._path)}}function vC(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function fc(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===wn){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Tn)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Xt)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===J){if(e!=null&&!ff(e)||n!=null&&!ff(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(C(t.getIndex()instanceof bu||t.getIndex()===km,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function cg(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class xt extends wr{constructor(e,n){super(e,n,new Hu,!1)}get parent(){const e=_m(this._path);return e===null?null:new xt(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ii{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new b(e),r=fr(this.ref,e);return new Ii(this._node.getChild(n),r,J)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Ii(i,fr(this.ref,r),J)))}hasChild(e){const n=new b(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function mt(t,e){return t=sn(t),t._checkNotDeleted("ref"),e!==void 0?fr(t._root,e):t._root}function fr(t,e){return t=sn(t),M(t._path)===null?KE("child","path",e):lc("child","path",e),new xt(t._repo,le(t._path,e))}function hc(t,e){t=sn(t),Zm("push",t._path),ji("push",e,t._path,!0);const n=ng(t._repo),r=mC(n),i=fr(t,r),s=fr(t,r);let o;return o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function oo(t,e){t=sn(t),Zm("set",t._path),ji("set",e,t._path,!1);const n=new ko;return iC(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Xr(t){t=sn(t);const e=new ug(()=>{}),n=new Lo(e);return rC(t._repo,t,n).then(r=>new Ii(r,new xt(t._repo,t._path),t._queryParams.getIndex()))}class Lo{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new gC("value",this,new Ii(e.snapshotNode,new xt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new _C(this,e,n):null}matches(e){return e instanceof Lo?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function yC(t,e,n,r,i){const s=new ug(n,void 0),o=new Lo(s);return oC(t._repo,t,o),()=>lC(t._repo,t,o)}function La(t,e,n,r){return yC(t,"value",e)}class Fo{}class wC extends Fo{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){ji("endAt",this._value,e._path,!0);const n=O0(e._queryParams,this._value,this._key);if(cg(n),fc(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wr(e._repo,e._path,n,e._orderByCalled)}}class EC extends Fo{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){ji("startAt",this._value,e._path,!0);const n=A0(e._queryParams,this._value,this._key);if(cg(n),fc(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new wr(e._repo,e._path,n,e._orderByCalled)}}class CC extends Fo{constructor(e){super(),this._path=e}_apply(e){vC(e,"orderByChild");const n=new b(this._path);if(L(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new bu(n),i=M0(e._queryParams,r);return fc(i),new wr(e._repo,e._path,i,!0)}}function Sl(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return lc("orderByChild","path",t),new CC(t)}class SC extends Fo{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){if(ji("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new wC(this._value,this._key)._apply(new EC(this._value,this._key)._apply(e))}}function kl(t,e){return new SC(t,e)}function Il(t,...e){let n=sn(t);for(const r of e)n=r._apply(n);return n}EE(xt);NE(xt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="FIREBASE_DATABASE_EMULATOR_HOST",Fa={};let IC=!1;function NC(t,e,n,r){t.repoInfo_=new om(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function TC(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Nt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ce("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=mf(s,i),l=o.repoInfo,a;typeof process<"u"&&Md&&(a=Md[kC]),a?(s=`http://${a}?ns=${l.namespace}`,o=mf(s,i),l=o.repoInfo):o.repoInfo.secure;const u=new jw(t.name,t.options,e);YE("Invalid Firebase Database URL",o),L(o.path)||Nt("Database URL must point to the root of a Firebase Database (not including a child path).");const f=RC(l,t,u,new zw(t.name,n));return new PC(f,t)}function xC(t,e){const n=Fa[e];(!n||n[t.key]!==t)&&Nt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),aC(t),delete n[t.key]}function RC(t,e,n,r){let i=Fa[e.name];i||(i={},Fa[e.name]=i);let s=i[t.toURLString()];return s&&Nt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new eC(t,IC,n,r),i[t.toURLString()]=s,s}class PC{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(tC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xt(this._repo,B())),this._rootInternal}_delete(){return this._rootInternal!==null&&(xC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Nt("Cannot call "+e+" on a deleted database.")}}function DC(t=uw(),e){const n=sw(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=qv("database");r&&AC(n,...r)}return n}function AC(t,e,n,r={}){t=sn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Nt("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Nt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new vs(vs.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Xv(r.mockUserToken,t.app.options.projectId);s=new vs(o)}NC(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(t){Ew(aw),Qs(new gi("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return TC(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),er(Ld,Fd,t),er(Ld,Fd,"esm2017")}Et.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Et.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};OC();const MC={apiKey:"AIzaSyDn1OTmejSt3k705cFoNFVaN0lX-t0sxlo",authDomain:"zeteny-test.firebaseapp.com",databaseURL:"https://zeteny-test-default-rtdb.europe-west1.firebasedatabase.app",projectId:"zeteny-test",storageBucket:"zeteny-test.firebasestorage.app",messagingSenderId:"1048302485508",appId:"1:1048302485508:web:15f9180a68b97faee97551",measurementId:"G-E3H84LKM0D"},LC=$p(MC),gt=DC(LC);function FC({currentUser:t,onSelectRoom:e}){const[n,r]=W.useState([]),[i,s]=W.useState([]),[o,l]=W.useState("rooms"),[a,u]=W.useState(!1),[f,c]=W.useState("");W.useEffect(()=>{const g=mt(gt,"chat/rooms");return La(g,async v=>{const N=v.val()||{},p=Object.keys(N).map(m=>({id:m,...N[m]})),h=await Promise.all(p.map(async m=>{var y;if(!((y=m.id)!=null&&y.startsWith("dm_")))return m;if(m.participants&&m.participants[t.id]){const S=Object.keys(m.participants).find(k=>k!==t.id);if(S){const k=await Xr(fr(mt(gt),`chat/users/${S}`));if(k.exists()){const x=k.val();m.name=x.username}}return m}return null}));r(h.filter(Boolean))})},[t.id]),W.useEffect(()=>{const g=mt(gt,"chat/users");return La(g,v=>{const N=v.val()||{},p=Object.keys(N).map(h=>({id:h,username:N[h].username,email:N[h].email}));s(p.filter(h=>h.id!==t.id))})},[t.id]);async function d(){if(!f.trim())return;const g=mt(gt,"chat/rooms"),v=hc(g);await oo(v,{name:f,createdBy:t.id,createdAt:Date.now()}),c(""),u(!1)}async function _(g,v){const p=`dm_${[t.id,g].sort().join("_")}`,h=mt(gt,`chat/rooms/${p}`);(await Xr(h)).exists()||await oo(h,{name:`Privt chat: ${t.username} s ${v}`,createdBy:t.id,createdAt:Date.now(),isDM:!0,participants:{[t.id]:!0,[g]:!0}}),e({id:p,name:v,isDM:!0})}return w.jsxs("div",{className:"sidebar",children:[w.jsxs("div",{className:"user-info",children:[w.jsx("div",{className:"avatar",children:t.username.charAt(0).toUpperCase()}),w.jsxs("div",{className:"user-details",children:[w.jsx("div",{className:"username",children:t.username}),w.jsx("div",{className:"email",children:t.email})]})]}),w.jsxs("div",{className:"tabs",children:[w.jsx("div",{className:`tab ${o==="rooms"?"active":""}`,onClick:()=>l("rooms"),children:"Szobk"}),w.jsx("div",{className:`tab ${o==="users"?"active":""}`,onClick:()=>l("users"),children:"Felhasznlk"})]}),o==="rooms"&&w.jsxs("div",{className:"tab-content active",id:"roomsTab",children:[w.jsx("h3",{children:"Chat Szobk"}),w.jsxs("ul",{className:"room-list",children:[n.length===0&&w.jsx("p",{style:{padding:"1rem",textAlign:"center",opacity:.7},children:"Mg nincsenek szobk. Hozz ltre egyet!"}),n.map(g=>{var v,N;return w.jsxs("li",{className:`room-item ${(v=g.id)!=null&&v.startsWith("dm_")?"dm-indicator":""}`,onClick:()=>e(g),children:[w.jsx("i",{className:(N=g.id)!=null&&N.startsWith("dm_")?"fas fa-lock":"fas fa-hashtag"})," ",g.name]},g.id)})]}),w.jsxs("button",{className:"create-room-btn",onClick:()=>u(!0),children:[w.jsx("i",{className:"fas fa-plus"})," j szoba"]}),a&&w.jsx("div",{className:"modal-overlay active",children:w.jsxs("div",{className:"modal",children:[w.jsxs("div",{className:"modal-header",children:[w.jsx("h2",{className:"modal-title",children:"j chat szoba"}),w.jsx("button",{className:"modal-close",onClick:()=>u(!1),children:""})]}),w.jsx("div",{className:"modal-body",children:w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Szoba neve"}),w.jsx("input",{value:f,onChange:g=>c(g.target.value)})]})}),w.jsxs("div",{className:"modal-footer",children:[w.jsx("button",{className:"modal-btn secondary",onClick:()=>u(!1),children:"Mgse"}),w.jsx("button",{className:"modal-btn primary",onClick:d,children:"Ltrehozs"})]})]})})]}),o==="users"&&w.jsxs("div",{className:"tab-content active",id:"usersTab",children:[w.jsx("h3",{children:"Online Felhasznlk"}),w.jsx("ul",{className:"user-list",children:i.map(g=>w.jsxs("li",{className:"user-item",onClick:()=>_(g.id,g.username),children:[w.jsx("i",{className:"fas fa-user"})," ",g.username]},g.id))})]})]})}function zC({currentUser:t,currentRoom:e}){const[n,r]=W.useState([]),[i,s]=W.useState(""),o=W.useRef(null);W.useEffect(()=>{if(!e){r([]);return}const a=mt(gt,`chat/rooms/${e.id}/messages`);return La(a,u=>{const f=u.val()||{},c=Object.keys(f).map(d=>({id:d,...f[d]})).sort((d,_)=>d.timestamp-_.timestamp);r(c),setTimeout(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},50)})},[e&&e.id]);async function l(){if(!i.trim()||!e)return;const a=mt(gt,`chat/rooms/${e.id}/messages`),u=hc(a);await oo(u,{userId:t.id,username:t.username,text:i.trim(),timestamp:Date.now()}),s("")}return w.jsxs("div",{className:"main-content",children:[w.jsxs("div",{className:"chat-header",children:[w.jsx("i",{className:"fas fa-hashtag"}),w.jsx("span",{id:"currentChat",children:e?e.name||"Privt chat":"Vlassz egy szobt"})]}),w.jsxs("div",{className:"messages",id:"messages",ref:o,children:[!e&&w.jsxs("div",{className:"message",children:[w.jsxs("div",{className:"message-header",children:[w.jsx("span",{className:"sender",children:"Rendszer"}),w.jsx("span",{className:"time",children:"--:--"})]}),w.jsx("div",{className:"message-content",children:"dvzllek a chatben! Vlassz egy szobt a bal oldalon."})]}),n.map(a=>w.jsxs("div",{className:`message ${a.userId===t.id?"own":""}`,children:[w.jsxs("div",{className:"message-header",children:[w.jsx("span",{className:"sender",children:a.username}),w.jsx("span",{className:"time",children:new Date(a.timestamp).toLocaleTimeString("hu-HU",{hour:"2-digit",minute:"2-digit"})})]}),w.jsx("div",{className:"message-content",children:a.text})]},a.id))]}),w.jsxs("div",{className:"message-input",children:[w.jsx("input",{value:i,onChange:a=>s(a.target.value),onKeyDown:a=>{a.key==="Enter"&&l()},placeholder:"rj zenetet..."}),w.jsx("button",{onClick:l,children:w.jsx("i",{className:"fas fa-paper-plane"})})]})]})}async function _f(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}function jC({onLogin:t}){const[e,n]=W.useState("login"),[r,i]=W.useState(""),[s,o]=W.useState(""),[l,a]=W.useState(""),[u,f]=W.useState(""),[c,d]=W.useState(""),[_,g]=W.useState(""),[v,N]=W.useState(""),[p,h]=W.useState("");async function m(){if(N(""),h(""),c!==_){N("A jelszavak nem egyeznek!");return}if(c.length<6){N("A jelsznak legalbb 6 karakter hossznak kell lennie!");return}if(!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(u)){N("rvnytelen email cm!");return}try{const k=mt(gt,"chat/users"),x=Il(k,Sl("username"),kl(l));if((await Xr(x)).exists()){N("A felhasznlnv mr foglalt!");return}const $=Il(k,Sl("email"),kl(u));if((await Xr($)).exists()){N("Az email cm mr hasznlatban van!");return}const me=await _f(c),Rt=hc(k);await oo(Rt,{username:l,email:u,password:me,createdAt:Date.now()});const on={id:Rt.key,username:l,email:u};h("Sikeres regisztrci!"),t(on)}catch(k){N("Hiba trtnt a regisztrci sorn."),console.error(k)}}async function y(){N(""),h("");try{const S=await _f(s),k=mt(gt,"chat/users"),x=Il(k,Sl("email"),kl(r)),R=await Xr(x);if(!R.exists()){N("Hibs email vagy jelsz!");return}let $=null;if(R.forEach(A=>{const me=A.val();me.password===S&&($={id:A.key,username:me.username,email:me.email})}),!$){N("Hibs email vagy jelsz!");return}t($)}catch(S){N("Hiba trtnt a bejelentkezs sorn."),console.error(S)}}return w.jsxs("div",{className:"auth-container",children:[w.jsxs("div",{className:"auth-tabs",children:[w.jsx("div",{className:`auth-tab ${e==="login"?"active":""}`,onClick:()=>n("login"),children:"Bejelentkezs"}),w.jsx("div",{className:`auth-tab ${e==="register"?"active":""}`,onClick:()=>n("register"),children:"Regisztrci"})]}),e==="login"?w.jsxs("div",{className:"auth-form active",id:"loginForm",children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Email cm"}),w.jsx("input",{type:"email",value:r,onChange:S=>i(S.target.value),placeholder:"Add meg az email cmed"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Jelsz"}),w.jsx("input",{type:"password",value:s,onChange:S=>o(S.target.value),placeholder:"Add meg a jelszavad"})]}),w.jsx("button",{className:"auth-btn",onClick:y,children:"Bejelentkezs"}),v&&w.jsx("div",{className:"error-message",children:v})]}):w.jsxs("div",{className:"auth-form active",id:"registerForm",children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Felhasznlnv"}),w.jsx("input",{value:l,onChange:S=>a(S.target.value),placeholder:"Vlassz felhasznlnevet"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Email cm"}),w.jsx("input",{value:u,onChange:S=>f(S.target.value),placeholder:"Add meg az email cmed"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Jelsz"}),w.jsx("input",{type:"password",value:c,onChange:S=>d(S.target.value),placeholder:"Vlassz ers jelszt"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Jelsz megerstse"}),w.jsx("input",{type:"password",value:_,onChange:S=>g(S.target.value),placeholder:"rd be jra a jelszt"})]}),w.jsx("button",{className:"auth-btn",onClick:m,children:"Regisztrci"}),v&&w.jsx("div",{className:"error-message",children:v}),p&&w.jsx("div",{className:"success-message",children:p})]})]})}function BC(){const[t,e]=W.useState(()=>{try{const o=localStorage.getItem("currentUser");return o?JSON.parse(o):null}catch{return null}}),[n,r]=W.useState(null),[i,s]=W.useState(()=>localStorage.getItem("darkMode")==="true");return W.useEffect(()=>{document.body.classList.toggle("dark-mode",i),localStorage.setItem("darkMode",String(i))},[i]),W.useEffect(()=>{t&&localStorage.setItem("currentUser",JSON.stringify(t))},[t]),t?w.jsxs("div",{className:"app-root",children:[w.jsx(Uv,{currentUser:t,onLogout:()=>{e(null),r(null),localStorage.removeItem("currentUser")},isDarkMode:i,toggleDark:()=>s(o=>!o)}),w.jsxs("div",{className:"container",id:"mainContainer",style:{display:"flex"},children:[w.jsx(FC,{currentUser:t,onSelectRoom:o=>r(o)}),w.jsx(zC,{currentUser:t,currentRoom:n})]})]}):w.jsx(jC,{onLogin:o=>e(o)})}Pp(document.getElementById("root")).render(w.jsx(xg.StrictMode,{children:w.jsx(BC,{})}));
